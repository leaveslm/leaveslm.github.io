<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Notes For Leaves</title>
  
  <subtitle>a Java developer&#39;s story</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://leaveslm.github.io/"/>
  <updated>2018-07-31T06:51:00.000Z</updated>
  <id>http://leaveslm.github.io/</id>
  
  <author>
    <name>Leaves</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>断点续传下载文件 多媒体在线播放</title>
    <link href="http://leaveslm.github.io/2018/07/31/2018-2018-07-31-%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6-%E5%A4%9A%E5%AA%92%E4%BD%93%E5%9C%A8%E7%BA%BF%E6%92%AD%E6%94%BE/"/>
    <id>http://leaveslm.github.io/2018/07/31/2018-2018-07-31-断点续传下载文件-多媒体在线播放/</id>
    <published>2018-07-31T08:08:26.000Z</published>
    <updated>2018-07-31T06:51:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="断点续传"><a href="#断点续传" class="headerlink" title="断点续传"></a>断点续传</h2><p>断点续传是在下载或上传时，将下载或上传任务（一个文件或一个压缩包）人为的划分为几个部分，每一个部分采用一个线程进行上传或下载，如果碰到网络故障，可以从已经上传或下载的部分开始继续上传下载未完成的部分，而没有必要从头开始上传下载。用户可以节省时间，提高速度。 </p><h2 id="关键点"><a href="#关键点" class="headerlink" title="关键点"></a>关键点</h2><p>所谓断点续传，也就是要从文件已经下载的地方开始继续下载。<br>客户端在 HTTP 请求中体现在：  </p><blockquote><p>Range: bytes=17563648-  </p></blockquote><p>服务器收到这个请求以后，返回的信息如下：</p><blockquote><p>Accept-Ranges: bytes<br>Content-Range: bytes 17563648-36057953/36057954<br>Content-Length: 18494306  </p></blockquote><p>HTTP 响应码应变为 206，如下所示：<br><img src="https://raw.githubusercontent.com/leaveslm/blog-image/master/blog/2018/20180731175155.png" alt="avatar"></p><h2 id="实现，以-Spring-Boot-1-5-14-RELEASE-为例"><a href="#实现，以-Spring-Boot-1-5-14-RELEASE-为例" class="headerlink" title="实现，以 Spring Boot 1.5.14.RELEASE 为例"></a>实现，以 Spring Boot 1.5.14.RELEASE 为例</h2><p>实现方法如下，关键点在于 HTTP 响应头设置，其他注意点已在注释中说明</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 文件下载，断点续传</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> fileName</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">download</span><span class="params">(HttpServletRequest request, HttpServletResponse response, String fileName)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//文件目录</span></span><br><span class="line">    Calendar calendar = Calendar.getInstance();</span><br><span class="line">    File serverDir = <span class="keyword">new</span> File(System.getProperty(<span class="string">"user.dir"</span>) + File.separator</span><br><span class="line">            + <span class="string">"uploads"</span> + File.separator</span><br><span class="line">            + calendar.get(Calendar.YEAR) + File.separator</span><br><span class="line">            + (calendar.get(Calendar.MONTH) + <span class="number">1</span>));</span><br><span class="line">    File file = <span class="keyword">new</span> File(serverDir + File.separator + fileName);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//下载开始位置</span></span><br><span class="line">    <span class="keyword">long</span> startByte = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//下载结束位置</span></span><br><span class="line">    <span class="keyword">long</span> endByte = file.length() - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取下载范围</span></span><br><span class="line">    String range = request.getHeader(<span class="string">"range"</span>);</span><br><span class="line">    <span class="keyword">if</span> (range != <span class="keyword">null</span> &amp;&amp; range.contains(<span class="string">"bytes="</span>) &amp;&amp; range.contains(<span class="string">"-"</span>)) &#123;</span><br><span class="line">        range = range.substring(range.lastIndexOf(<span class="string">"="</span>) + <span class="number">1</span>).trim();</span><br><span class="line">        String rangeArray[] = range.split(<span class="string">"-"</span>);</span><br><span class="line">        <span class="keyword">if</span> (rangeArray.length == <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="comment">//Example: bytes=1024-</span></span><br><span class="line">            <span class="keyword">if</span> (range.endsWith(<span class="string">"-"</span>)) &#123;</span><br><span class="line">                startByte = Long.parseLong(rangeArray[<span class="number">0</span>]);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">//Example: bytes=-1024</span></span><br><span class="line">                endByte = Long.parseLong(rangeArray[<span class="number">0</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//Example: bytes=2048-4096</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (rangeArray.length == <span class="number">2</span>) &#123;</span><br><span class="line">            startByte = Long.parseLong(rangeArray[<span class="number">0</span>]);</span><br><span class="line">            endByte = Long.parseLong(rangeArray[<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">long</span> contentLength = endByte - startByte + <span class="number">1</span>;</span><br><span class="line">    String contentType = request.getServletContext().getMimeType(fileName);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//HTTP 响应头设置</span></span><br><span class="line">    <span class="comment">//断点续传，HTTP 状态码必须为 206，否则不设置，如果非断点续传设置 206 状态码，则浏览器无法下载</span></span><br><span class="line">    <span class="keyword">if</span> (range != <span class="keyword">null</span>) &#123;</span><br><span class="line">        response.setStatus(HttpServletResponse.SC_PARTIAL_CONTENT);</span><br><span class="line">    &#125;</span><br><span class="line">    response.setContentType(contentType);</span><br><span class="line">    response.setHeader(<span class="string">"Content-Type"</span>, contentType);</span><br><span class="line">    response.setHeader(<span class="string">"Content-Length"</span>, String.valueOf(contentLength));</span><br><span class="line">    response.setHeader(<span class="string">"Accept-Ranges"</span>, <span class="string">"bytes"</span>);</span><br><span class="line">    <span class="comment">//Content-Range: 下载开始位置-下载结束位置/文件大小</span></span><br><span class="line">    response.setHeader(<span class="string">"Content-Range"</span>, <span class="string">"bytes "</span> + startByte + <span class="string">"-"</span> + endByte + <span class="string">"/"</span> + file.length());</span><br><span class="line">    <span class="comment">//Content-disposition: inline; filename=xxx.xxx 表示浏览器内嵌显示该文件</span></span><br><span class="line">    <span class="comment">//Content-disposition: attachment; filename=xxx.xxx 表示浏览器下载该文件</span></span><br><span class="line">    response.setHeader(<span class="string">"Content-Disposition"</span>, <span class="string">"inline; filename="</span> + fileName);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//传输文件流</span></span><br><span class="line">    BufferedOutputStream outputStream = <span class="keyword">null</span>;</span><br><span class="line">    RandomAccessFile randomAccessFile = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">//已传送数据大小</span></span><br><span class="line">    <span class="keyword">long</span> transmittedLength = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//以只读模式设置文件指针偏移量</span></span><br><span class="line">        randomAccessFile = <span class="keyword">new</span> RandomAccessFile(file, <span class="string">"r"</span>);</span><br><span class="line">        randomAccessFile.seek(startByte);</span><br><span class="line"></span><br><span class="line">        outputStream = <span class="keyword">new</span> BufferedOutputStream(response.getOutputStream());</span><br><span class="line">        <span class="keyword">byte</span>[] buff = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">4096</span>];</span><br><span class="line">        <span class="keyword">int</span> len;</span><br><span class="line">        <span class="keyword">while</span> (transmittedLength &lt; contentLength &amp;&amp; (len = randomAccessFile.read(buff)) != -<span class="number">1</span>) &#123;</span><br><span class="line">            outputStream.write(buff, <span class="number">0</span>, len);</span><br><span class="line">            transmittedLength += len;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        outputStream.flush();</span><br><span class="line">        response.flushBuffer();</span><br><span class="line">        logger.info(<span class="string">"下载完毕: &#123;&#125;-&#123;&#125;: &#123;&#125;"</span>, startByte, endByte, transmittedLength);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        logger.info(<span class="string">"下载停止: &#123;&#125;-&#123;&#125;: &#123;&#125;"</span>, startByte, endByte, transmittedLength);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (randomAccessFile != <span class="keyword">null</span>) &#123;</span><br><span class="line">                randomAccessFile.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="多媒体播放"><a href="#多媒体播放" class="headerlink" title="多媒体播放"></a>多媒体播放</h2><p>实现断点续传是多媒体播放的关键点</p><h3 id="HTML-示例"><a href="#HTML-示例" class="headerlink" title="HTML 示例"></a>HTML 示例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Video<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">"http://127.0.0.1:8001/demo/download/o_1cjkl6f5o1lslun02dv1mn3nup2n.mp4"</span> <span class="attr">controls</span>=<span class="string">"controls"</span>&gt;</span></span><br><span class="line">    Your browser does not support the video tag.</span><br><span class="line"><span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">embed</span> <span class="attr">src</span>=<span class="string">"http://27.0.0.1:8001/demo/download/%E5%A6%82%E6%AD%8C.mp3"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h3><p><img src="https://raw.githubusercontent.com/leaveslm/blog-image/master/blog/2018/20180731171110.png" alt="avatar"><br><img src="https://raw.githubusercontent.com/leaveslm/blog-image/master/blog/2018/20180731171111.png" alt="avatar">  </p><h2 id="参考与感谢"><a href="#参考与感谢" class="headerlink" title="参考与感谢"></a>参考与感谢</h2><blockquote><p><a href="https://www.ibm.com/developerworks/cn/java/joy-down/index.html" target="_blank" rel="noopener">钟华 : 用 Java 实现断点续传 (HTTP)</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;断点续传&quot;&gt;&lt;a href=&quot;#断点续传&quot; class=&quot;headerlink&quot; title=&quot;断点续传&quot;&gt;&lt;/a&gt;断点续传&lt;/h2&gt;&lt;p&gt;断点续传是在下载或上传时，将下载或上传任务（一个文件或一个压缩包）人为的划分为几个部分，每一个部分采用一个线程进行上传或下载
      
    
    </summary>
    
      <category term="代码" scheme="http://leaveslm.github.io/categories/%E4%BB%A3%E7%A0%81/"/>
    
    
      <category term="java" scheme="http://leaveslm.github.io/tags/java/"/>
    
      <category term="spring boot" scheme="http://leaveslm.github.io/tags/spring-boot/"/>
    
  </entry>
  
  <entry>
    <title>Plupload 文件断点续传 文件分块上传</title>
    <link href="http://leaveslm.github.io/2018/07/30/2018-2018-07-30-Plupload-%E6%96%87%E4%BB%B6%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0-%E6%96%87%E4%BB%B6%E5%88%86%E5%9D%97%E4%B8%8A%E4%BC%A0/"/>
    <id>http://leaveslm.github.io/2018/07/30/2018-2018-07-30-Plupload-文件断点续传-文件分块上传/</id>
    <published>2018-07-30T06:11:01.000Z</published>
    <updated>2018-08-02T06:51:00.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Plupload-介绍"><a href="#Plupload-介绍" class="headerlink" title="Plupload 介绍"></a>Plupload 介绍</h2><p>Plupload 是一款由著名的 Web 编辑器 TinyMCE 团队开发的上传组件，简单易用且功能强大。Plupload 会自动侦测当前的浏览器环境，选择最合适的上传方式，并且会优先使用 HTML5 的方式。该前端插件实现原理简单来说就是将文件按照指定分块大小切割成 n 块，然后依次将这 n 块文件数据上传至服务端，可实现暂停、继续上传。这也算是断点续传的一种实现方式。  </p><p>本人在使用过程中对于这个插件也遇到了一些坑，比如，上传暂停后重新开始，Plupload 会重复上传上次最后一块文件块；该问题的原因在于调用 Plupload 的 stop() 方法后 Plupload 会立刻中断本次请求，这时服务器正在处理请求，还未及时将处理结果返回至前端请求被中断了，造成服务器实际已保存该文件块，但 Plupload 认为该文件块未上传完成，导致暂停后重新开始，服务端文件块重复，服务端接收到的文件与实际不同。在本文中我将会解决这个问题。</p><h2 id="Plupload-获取"><a href="#Plupload-获取" class="headerlink" title="Plupload 获取"></a>Plupload 获取</h2><p>正确的途径当然要从官网<a href="https://www.plupload.com/download/" target="_blank" rel="noopener">下载</a><br>本人下载版本 Plupload 2.3.6 AGPLv3，里面包含需要用到的 js，还有 Custom example 和 Events example 两个 Demo 页面。接下来将改写 Custom example 页面，实现需要的功能。  </p><h2 id="前端-HTML-页面"><a href="#前端-HTML-页面" class="headerlink" title="前端 HTML 页面"></a>前端 HTML 页面</h2><p>前端使用比较简单，通过一些简单参数配置即可使用，具体参数设置可查看<a href="https://www.plupload.com/docs/v2/Uploader" target="_blank" rel="noopener">官方文档</a>，其中主要用到 Plupload 插件的 start() 和 stop() 两个方法  </p><p>修改后的 Custom example 如下，附上源代码：<br><img src="https://raw.githubusercontent.com/leaveslm/blog-image/master/blog/2018/20180731143359.png" alt="avatar"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">xmlns</span>=<span class="string">"http://www.w3.org/1999/xhtml"</span> <span class="attr">dir</span>=<span class="string">"ltr"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Plupload - Custom example<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- production --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"../js/plupload.full.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- debug </span></span><br><span class="line"><span class="comment">    &lt;script type="text/javascript" src="../js/moxie.js"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">    &lt;script type="text/javascript" src="../js/plupload.dev.js"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">style</span>=<span class="string">"font: 13px Verdana; background: #eee; color: #333"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Custom example<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Shows you how to use the core plupload API.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"filelist"</span>&gt;</span>Your browser doesn't have Flash, Silverlight or HTML5 support.<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"pickfiles"</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span>&gt;</span>[Select files]<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"start"</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span>&gt;</span>[Upload Start]<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"stop"</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span>&gt;</span>[Upload Pause]<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span> <span class="attr">id</span>=<span class="string">"console"</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    // Custom example logic</span></span><br><span class="line"><span class="undefined">    var uploader = new plupload.Uploader(&#123;</span></span><br><span class="line"><span class="undefined">        runtimes: 'html5,flash,silverlight,html4',</span></span><br><span class="line"><span class="undefined">        browse_button: 'pickfiles', // you can pass an id...</span></span><br><span class="line"><span class="undefined">        container: document.getElementById('container'), // ... or DOM Element itself</span></span><br><span class="line"><span class="undefined">        url: 'http://127.0.0.1:8001/demo/upload', //服务器端上传处理程序的URL</span></span><br><span class="line"><span class="undefined">        flash_swf_url: '../js/Moxie.swf',</span></span><br><span class="line"><span class="undefined">        silverlight_xap_url: '../js/Moxie.xap',</span></span><br><span class="line"><span class="undefined">        chunk_size: '2mb', //分块大小</span></span><br><span class="line"><span class="undefined">        unique_names: true, //生成唯一文件名</span></span><br><span class="line"><span class="undefined">        send_file_name: true, //发送文件名</span></span><br><span class="line"><span class="undefined">        max_retries: 3, //在触发Error事件之前重试块或文件的次数</span></span><br><span class="line"><span class="undefined">        // multipart_params: &#123; gmtCreate : new Date().getTime() &#125;, //每次上传文件时要发送的键/值对的哈希值</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        filters: &#123;</span></span><br><span class="line"><span class="undefined">            max_file_size: '4096mb',</span></span><br><span class="line"><span class="undefined">            mime_types: [</span></span><br><span class="line"><span class="undefined">                // &#123;title : "Image files", extensions : "jpg,gif,png"&#125;,</span></span><br><span class="line"><span class="undefined">                // &#123;title : "Zip files", extensions : "zip"&#125;,</span></span><br><span class="line"><span class="undefined">                // &#123;title : "Video files", extensions : "mp4"&#125;</span></span><br><span class="line"><span class="undefined">                &#123;title: "All files", extensions: "*"&#125;</span></span><br><span class="line"><span class="undefined">            ]</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        init: &#123;</span></span><br><span class="line"><span class="undefined">            PostInit: function () &#123;</span></span><br><span class="line"><span class="undefined">                // uploader.setOption('multipart_params', &#123;gmtCreate: new Date().getTime()&#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">                document.getElementById('filelist').innerHTML = '';</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">                document.getElementById('start').onclick = function () &#123;</span></span><br><span class="line"><span class="undefined">                    uploader.start();</span></span><br><span class="line"><span class="undefined">                    return false;</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">                document.getElementById('stop').onclick = function () &#123;</span></span><br><span class="line"><span class="undefined">                    uploader.stop();</span></span><br><span class="line"><span class="undefined">                    return false;</span></span><br><span class="line"><span class="undefined">                &#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            FilesAdded: function (up, files) &#123;</span></span><br><span class="line"><span class="undefined">                plupload.each(files, function (file) &#123;</span></span><br><span class="line"><span class="xml">                    document.getElementById('filelist').innerHTML += '<span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"' + file.id + '"</span>&gt;</span>' + file.name + ' (' + plupload.formatSize(file.size) + ') <span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>';</span></span><br><span class="line"><span class="undefined">                &#125;);</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            UploadProgress: function (up, file) &#123;</span></span><br><span class="line"><span class="xml">                document.getElementById(file.id).getElementsByTagName('b')[0].innerHTML = '<span class="tag">&lt;<span class="name">span</span>&gt;</span>' + file.percent + "%<span class="tag">&lt;/<span class="name">span</span>&gt;</span>";</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            ChunkUploaded: function (up, file, info) &#123;</span></span><br><span class="line"><span class="undefined">                // Called when file chunk has finished uploading</span></span><br><span class="line"><span class="undefined">                console.log('[ChunkUploaded] File:', file, "Info:", info);</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            Error: function (up, err) &#123;</span></span><br><span class="line"><span class="undefined">                document.getElementById('console').appendChild(document.createTextNode("\nError #" + err.code + ": " + err.message));</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    uploader.init();</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="服务端，以-Spring-Boot-1-5-14-RELEASE-为例"><a href="#服务端，以-Spring-Boot-1-5-14-RELEASE-为例" class="headerlink" title="服务端，以 Spring Boot 1.5.14.RELEASE 为例"></a>服务端，以 Spring Boot 1.5.14.RELEASE 为例</h2><h3 id="Plupload-对象"><a href="#Plupload-对象" class="headerlink" title="Plupload 对象"></a>Plupload 对象</h3><p>Plupload 上传文件时会附带 <code>name</code>, <code>chunks</code>, <code>chunk</code> 三个参数，这里我通过 Plupload 对象接收参数  </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Plupload 实体类，建议不要修改</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Leaves</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@version</span> 1.0.0</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@date</span> 2018/7/26</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Plupload</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 文件名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 上传文件总块数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> chunks = -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 当前块数，从0开始计数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> chunk = -<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 上传时间戳，自定义</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Long gmtCreate;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getChunks</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> chunks;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setChunks</span><span class="params">(<span class="keyword">int</span> chunks)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.chunks = chunks;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getChunk</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> chunk;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setChunk</span><span class="params">(<span class="keyword">int</span> chunk)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.chunk = chunk;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Long <span class="title">getGmtCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> gmtCreate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setGmtCreate</span><span class="params">(Long gmtCreate)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.gmtCreate = gmtCreate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Plupload&#123;"</span> +</span><br><span class="line">                <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", chunks="</span> + chunks +</span><br><span class="line">                <span class="string">", chunk="</span> + chunk +</span><br><span class="line">                <span class="string">", gmtCreate="</span> + gmtCreate +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="upload-，接收-Plupload-上传数据"><a href="#upload-，接收-Plupload-上传数据" class="headerlink" title="upload()，接收 Plupload 上传数据"></a>upload()，接收 Plupload 上传数据</h3><p>本文提到上传暂停后重新开始，Plupload 会重复上传上次最后一块文件数据这一问题，这里给出一种解决办法：每次收到 Plupload 上传的文件块，处理成功后将当前文件块编号记录到缓存（缓存需要设置过期时间，防止永久驻留），暂停后重新开始，服务端比较本次上传文件块是否已在上次上传处理，如果已处理则抛弃改文件块。  </p><p>如果需要支持文件秒传，可以通过验证文件 MD5 值简单实现，Java 可通过 <code>commons-codec</code> 包下的 DigestUtils.md5Hex(new FileInputStream(filePath))); 方法获取文件 MD5 值，该 Demo 未做文件秒传。  </p><p>具体实现，请看源码：</p><pre><code class="Java"><span class="comment">/**</span><span class="comment"> * 文件上传，断点续传，分块上传</span><span class="comment"> *</span><span class="comment"> * <span class="doctag">@param</span> request</span><span class="comment"> * <span class="doctag">@param</span> response</span><span class="comment"> * <span class="doctag">@param</span> plupload</span><span class="comment"> * <span class="doctag">@return</span></span><span class="comment"> */</span><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">upload</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Plupload plupload)</span> </span>{    <span class="comment">//按日期文件夹保存</span>    Calendar calendar = Calendar.getInstance();    File serverDir = <span class="keyword">new</span> File(System.getProperty(<span class="string">"user.dir"</span>) + File.separator            + <span class="string">"uploads"</span> + File.separator            + calendar.get(Calendar.YEAR) + File.separator            + (calendar.get(Calendar.MONTH) + <span class="number">1</span>));    <span class="comment">//mkdirs() 可创建多级目录，mkdir() 只能创建一级目录</span>    <span class="keyword">if</span> (!serverDir.exists()) {        <span class="keyword">if</span> (serverDir.mkdirs()) {            <span class="comment">//文件夹创建失败返回403</span>            response.setStatus(HttpServletResponse.SC_FORBIDDEN);            <span class="keyword">return</span> <span class="keyword">false</span>;        }    }    <span class="comment">//文件名</span>    String fileName = plupload.getName();    <span class="comment">//上传文件总块数</span>    <span class="keyword">int</span> chunks = plupload.getChunks();    <span class="comment">//当前上传块，从 0 开始</span>    <span class="keyword">int</span> nowChunk = plupload.getChunk();    <span class="comment">//文件块重复检查</span>    ValueOperations operations = redisTemplate.opsForValue();    Object lastChunk = operations.get(<span class="string">"UPLOAD_"</span> + plupload.getName());    <span class="keyword">if</span> (lastChunk != <span class="keyword">null</span>) {        <span class="keyword">if</span> (Objects.equals(Integer.parseInt(lastChunk.toString()), nowChunk)) {            logger.warn(<span class="string">"文件块重复，chunks: {}, now chunk: {}, last chunk: {}"</span>, chunks, nowChunk, lastChunk);            <span class="keyword">return</span> <span class="keyword">true</span>;        }    }    <span class="comment">//获取文件</span>    MultipartHttpServletRequest multipartHttpServletRequest = (MultipartHttpServletRequest) request;    MultiValueMap&lt;String, MultipartFile&gt; map = multipartHttpServletRequest.getMultiFileMap();    <span class="keyword">if</span> (map == <span class="keyword">null</span> || map.size() &lt;= <span class="number">0</span>) {        response.setStatus(HttpServletResponse.SC_FORBIDDEN);        <span class="keyword">return</span> <span class="keyword">false</span>;    }    <span class="keyword">for</span> (String key : map.keySet()) {        List&lt;MultipartFile&gt; multipartFileList = map.get(key);        File targetFile = <span class="keyword">new</span> File(serverDir + File.separator + fileName);        <span class="keyword">for</span> (MultipartFile multipartFile : multipartFileList) {            <span class="keyword">try</span> {                <span class="comment">//上传文件总块数 &gt; 1，则为分块上传，需要进行合并</span>                <span class="keyword">if</span> (chunks &gt; <span class="number">1</span>) {                    <span class="keyword">this</span>.writePartFile(multipartFile.getInputStream(), targetFile, nowChunk != <span class="number">0</span>);                } <span class="keyword">else</span> {                    <span class="comment">//上传文件总块数 = 1，直接拷贝文件内容</span>                    multipartFile.transferTo(targetFile);                }            } <span class="keyword">catch</span> (IOException e) {                logger.error(e.getMessage());                e.printStackTrace();                response.setStatus(HttpServletResponse.SC_FORBIDDEN);                <span class="keyword">return</span> <span class="keyword">false</span>;            }        }    }    <span class="comment">//记录上传块数</span>    <span class="keyword">if</span> (nowChunk == chunks - <span class="number">1</span>) {        redisTemplate.delete(<span class="string">"UPLOAD_"</span> + plupload.getName());    } <span class="keyword">else</span> {        operations.set(<span class="string">"UPLOAD_"</span> + plupload.getName(), String.valueOf(nowChunk), <span class="number">86400L</span>, TimeUnit.SECONDS);    }    <span class="keyword">return</span> <span class="keyword">true</span>;}<span class="comment">/**</span><span class="comment"> * 分块写入</span><span class="comment"> *</span><span class="comment"> * <span class="doctag">@param</span> inputStream</span><span class="comment"> * <span class="doctag">@param</span> file</span><span class="comment"> * <span class="doctag">@param</span> append</span><span class="comment"> */</span><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">writePartFile</span><span class="params">(InputStream inputStream, File file, <span class="keyword">boolean</span> append)</span> </span>{    OutputStream outputStream = <span class="keyword">null</span>;    <span class="keyword">try</span> {        <span class="keyword">if</span> (!append) {            <span class="comment">//从头开始写</span>            outputStream = <span class="keyword">new</span> BufferedOutputStream(<span class="keyword">new</span> FileOutputStream(file));        } <span class="keyword">else</span> {            <span class="comment">//追加写入</span>            outputStream = <span class="keyword">new</span> BufferedOutputStream(<span class="keyword">new</span> FileOutputStream(file, <span class="keyword">true</span>));        }        <span class="keyword">byte</span>[] bytes = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];        <span class="keyword">int</span> len = <span class="number">0</span>;        <span class="keyword">while</span> ((len = (inputStream.read(bytes))) &gt; <span class="number">0</span>) {            outputStream.write(bytes, <span class="number">0</span>, len);        }    } <span class="keyword">catch</span> (IOException e) {        e.printStackTrace();    } <span class="keyword">finally</span> {        <span class="keyword">try</span> {            <span class="keyword">if</span> (outputStream != <span class="keyword">null</span>) {                outputStream.flush();                outputStream.close();            }            <span class="keyword">if</span> (inputStream != <span class="keyword">null</span>) {                inputStream.close();            }        } <span class="keyword">catch</span> (IOException e) {            e.printStackTrace();        }    }}</code></pre><h2 id="断点续传效果图"><a href="#断点续传效果图" class="headerlink" title="断点续传效果图"></a>断点续传效果图</h2><p><img src="https://raw.githubusercontent.com/leaveslm/blog-image/master/blog/2018/20180731154633.png" alt="avatar"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Plupload-介绍&quot;&gt;&lt;a href=&quot;#Plupload-介绍&quot; class=&quot;headerlink&quot; title=&quot;Plupload 介绍&quot;&gt;&lt;/a&gt;Plupload 介绍&lt;/h2&gt;&lt;p&gt;Plupload 是一款由著名的 Web 编辑器 TinyMCE 团
      
    
    </summary>
    
      <category term="代码" scheme="http://leaveslm.github.io/categories/%E4%BB%A3%E7%A0%81/"/>
    
    
      <category term="java" scheme="http://leaveslm.github.io/tags/java/"/>
    
      <category term="spring boot" scheme="http://leaveslm.github.io/tags/spring-boot/"/>
    
  </entry>
  
  <entry>
    <title>Linux 安装 Redis</title>
    <link href="http://leaveslm.github.io/2018/07/25/2018-2018-07-25-Linux-%E5%AE%89%E8%A3%85-Redis/"/>
    <id>http://leaveslm.github.io/2018/07/25/2018-2018-07-25-Linux-安装-Redis/</id>
    <published>2018-07-25T01:51:00.000Z</published>
    <updated>2018-07-25T06:01:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>以 Redis 4.0.10 为例<br>Redis 官方<a href="https://redis.io/download" target="_blank" rel="noopener">下载地址</a></p><h2 id="下载、解压、编译"><a href="#下载、解压、编译" class="headerlink" title="下载、解压、编译"></a>下载、解压、编译</h2><p>下载</p><blockquote><p>wget <a href="http://download.redis.io/releases/redis-4.0.10.tar.gz" target="_blank" rel="noopener">http://download.redis.io/releases/redis-4.0.10.tar.gz</a></p></blockquote><p>解压</p><blockquote><p>tar xzf redis-4.0.10.tar.gz</p></blockquote><p>编译</p><blockquote><p>cd redis-4.0.10<br>make</p></blockquote><h2 id="启动-Redis"><a href="#启动-Redis" class="headerlink" title="启动 Redis"></a>启动 Redis</h2><p>前台启动  </p><blockquote><p>src/redis-server  </p></blockquote><p>测试 Redis 是否启动</p><blockquote><p>src/redis-cli</p></blockquote><p>如果输出以下内容，表示 Redis 已启动  </p><blockquote><p>127.0.0.1:6379&gt; set foo bar<br>OK<br>127.0.0.1:6379&gt; get foo<br>“bar”  </p></blockquote><p>后台启动<br>修改 Redis 配置文件 redis.conf</p><blockquote><p>vi redis.conf</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">***</span><br><span class="line">daemonize yes</span><br><span class="line">***</span><br></pre></td></tr></table></figure><h2 id="开启外网访问"><a href="#开启外网访问" class="headerlink" title="开启外网访问"></a>开启外网访问</h2><p>确保 redis.conf 中 daemonize 为 yes，确保守护进程开启，Redis 可以在后台可以运行</p><p>把 Redis 端口放到防火墙计划中</p><blockquote><p>/sbin/iptables -I INPUT -p tcp –dport 6379 -j ACCEPT  </p></blockquote><p>修改 Redis 配置文件 redis.conf</p><blockquote><p>vi redis.conf</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">***</span><br><span class="line"># bind 127.0.0.1</span><br><span class="line">***</span><br><span class="line">protected-mode no</span><br><span class="line">***</span><br></pre></td></tr></table></figure><p>重启 Redis，并指定配置文件</p><blockquote><p>src/redis-cli shutdown<br>src/redis-server ./redis.conf</p></blockquote><h2 id="设置-Redis-开机启动"><a href="#设置-Redis-开机启动" class="headerlink" title="设置 Redis 开机启动"></a>设置 Redis 开机启动</h2><p>在 /etc 下新建 redis 文件夹</p><blockquote><p>mkdir /etc/redis</p></blockquote><p>把安装 Redis 根目录里面的 redis.conf 复制到 /etc/redis/6379.conf</p><blockquote><p>cp redis.conf /etc/redis/6379.conf</p></blockquote><p>复制 Redis 启动脚本<br>Redis 启动脚本一般在 Redis 根目录的 utils 目录下，如果不知道路径，可以先查看路径</p><blockquote><p>find / -name redis_init_script</p></blockquote><p>复制启动脚本到 /etc/init.d/redis 文件中</p><blockquote><p>cp utils/redis_init_script /etc/init.d/redis</p></blockquote><p>修改启动脚本参数</p><blockquote><p>vi /etc/init.d/redis</p></blockquote><p>指定 Redis 安装路径<br>EXEC=…<br>CLIEXEC=…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">#</span><br><span class="line"># Simple Redis init.d script conceived to work on Linux systems</span><br><span class="line"># as it does use of the /proc filesystem.</span><br><span class="line"></span><br><span class="line">### BEGIN INIT INFO</span><br><span class="line"># Provides:     redis_6379</span><br><span class="line"># Default-Start:        2 3 4 5</span><br><span class="line"># Default-Stop:         0 1 6</span><br><span class="line"># Short-Description:    Redis data structure server</span><br><span class="line"># Description:          Redis data structure server. See https://redis.io</span><br><span class="line">### END INIT INFO</span><br><span class="line"></span><br><span class="line">REDISPORT=6379</span><br><span class="line">EXEC=/usr/local/redis-4.0.10/src/redis-server</span><br><span class="line">CLIEXEC=/usr/local/redis-4.0.10/src/redis-cli</span><br><span class="line"></span><br><span class="line">PIDFILE=/var/run/redis_$&#123;REDISPORT&#125;.pid</span><br><span class="line">CONF=&quot;/etc/redis/$&#123;REDISPORT&#125;.conf&quot;</span><br><span class="line"></span><br><span class="line">***</span><br></pre></td></tr></table></figure></p><p>关闭 Redis</p><blockquote><p>service redis stop</p></blockquote><p>设为开机启动</p><blockquote><p>chkconfig redis on</p></blockquote><p>设为开机关闭</p><blockquote><p>chkconfig redis off</p></blockquote><p>启动 Redis</p><blockquote><p>service redis start</p></blockquote><p>检查自启动项列表中没有 redis 这个</p><blockquote><p>chkconfig –list redis  </p></blockquote><h2 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h2><p>如果执行 make 报错，可能缺少某些依赖包  </p><h3 id="错误1"><a href="#错误1" class="headerlink" title="错误1"></a><strong>错误1</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cd src &amp;&amp; make all</span><br><span class="line">make[1]: 进入目录“/usr/local/redis-4.0.10/src”</span><br><span class="line">    CC Makefile.dep</span><br><span class="line">make[1]: 离开目录“/usr/local/redis-4.0.10/src”</span><br><span class="line">make[1]: 进入目录“/usr/local/redis-4.0.10/src”</span><br><span class="line">    CC adlist.o</span><br><span class="line">/bin/sh: cc: 未找到命令</span><br><span class="line">make[1]: *** [adlist.o] 错误 127</span><br><span class="line">make[1]: 离开目录“/usr/local/redis-4.0.10/src”</span><br><span class="line">make: *** [all] 错误 2</span><br></pre></td></tr></table></figure><p>以上报错缺少 GCC，则如下命令安装：  </p><blockquote><p>yum install gcc  </p></blockquote><h3 id="错误2"><a href="#错误2" class="headerlink" title="错误2"></a><strong>错误2</strong></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cd src &amp;&amp; make all</span><br><span class="line">make[1]: 进入目录“/usr/local/redis-4.0.10/src”</span><br><span class="line">    CC adlist.o</span><br><span class="line">In file included from adlist.c:34:0:</span><br><span class="line">zmalloc.h:50:31: 致命错误：jemalloc/jemalloc.h：没有那个文件或目录</span><br><span class="line"> #include &lt;jemalloc/jemalloc.h&gt;</span><br><span class="line">                               ^</span><br><span class="line">编译中断。</span><br><span class="line">make[1]: *** [adlist.o] 错误 1</span><br><span class="line">make[1]: 离开目录“/usr/local/redis-4.0.10/src”</span><br><span class="line">make: *** [all] 错误 2</span><br></pre></td></tr></table></figure><p>以上报错则如下命令解决：  </p><blockquote><p>make MALLOC=libc  </p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;以 Redis 4.0.10 为例&lt;br&gt;Redis 官方&lt;a href=&quot;https://redis.io/download&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;下载地址&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;下载、解压、编译&quot;&gt;&lt;a href=&quot;#
      
    
    </summary>
    
      <category term="基础服务" scheme="http://leaveslm.github.io/categories/%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1/"/>
    
    
      <category term="linux" scheme="http://leaveslm.github.io/tags/linux/"/>
    
      <category term="redis" scheme="http://leaveslm.github.io/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>Linux 安装 MySQL 5.7</title>
    <link href="http://leaveslm.github.io/2018/07/18/2018-2018-07-18-Linux-%E5%AE%89%E8%A3%85-MySQL-5-7/"/>
    <id>http://leaveslm.github.io/2018/07/18/2018-2018-07-18-Linux-安装-MySQL-5-7/</id>
    <published>2018-07-18T09:05:28.000Z</published>
    <updated>2018-07-21T15:17:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>MySQL 5.7.22 官方<a href="https://dev.mysql.com/downloads/mysql/5.7.html#downloads" target="_blank" rel="noopener">下载地址</a></p><h2 id="清理-MySQL、下载解压"><a href="#清理-MySQL、下载解压" class="headerlink" title="清理 MySQL、下载解压"></a>清理 MySQL、下载解压</h2><p>清理  </p><blockquote><p>find / -name mysql | xargs rm -rf  </p></blockquote><p>下载  </p><blockquote><p>wget <a href="https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.22-linux-glibc2.12-x86_64.tar.gz" target="_blank" rel="noopener">https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.22-linux-glibc2.12-x86_64.tar.gz</a></p></blockquote><p>解压  </p><blockquote><p>tar -zxvf mysql-5.7.22-linux-glibc2.12-x86_64.tar.gz</p></blockquote><p>重命名    </p><blockquote><p>mv mysql-5.7.22-linux-glibc2.12-x86_64 mysql </p></blockquote><hr><h2 id="创建-MySQL-组、用户"><a href="#创建-MySQL-组、用户" class="headerlink" title="创建 MySQL 组、用户"></a>创建 MySQL 组、用户</h2><p>查看有没有mysql组  </p><blockquote><p>cat /etc/group | grep mysql  </p></blockquote><p>查看有没有mysql用户</p><blockquote><p>cat /etc/passwd |grep mysql  </p></blockquote><p>没有则创建 </p><blockquote><p>groupadd mysql<br>useradd -r -g mysql mysql  </p></blockquote><p>更改 mysql 目录下所有的目录及文件夹所属组合用户</p><blockquote><p>chown -R mysql mysql<br>chgrp -R mysql mysql<br>cd mysql<br>ls -l<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">drwxr-xr-x.  2 mysql mysql  4096 7月  18 15:04 bin</span><br><span class="line">-rw-r--r--.  1 mysql mysql 17987 3月   4 21:40 COPYING</span><br><span class="line">drwxr-xr-x.  2 mysql mysql    52 7月  18 15:04 docs</span><br><span class="line">drwxr-xr-x.  3 mysql mysql  4096 7月  18 15:04 include</span><br><span class="line">drwxr-xr-x.  5 mysql mysql  4096 7月  18 15:04 lib</span><br><span class="line">drwxr-xr-x.  4 mysql mysql    28 7月  18 15:04 man</span><br><span class="line">-rw-r--r--.  1 mysql mysql  2478 3月   4 21:40 README</span><br><span class="line">drwxr-xr-x. 28 mysql mysql  4096 7月  18 15:04 share</span><br><span class="line">drwxr-xr-x.  2 mysql mysql    86 7月  18 15:08 support-files</span><br></pre></td></tr></table></figure></p></blockquote><hr><h2 id="修改-my-cnf-配置文件"><a href="#修改-my-cnf-配置文件" class="headerlink" title="修改 my.cnf 配置文件"></a>修改 my.cnf 配置文件</h2><p>从 5.7.18 开始不在二进制包中提供 my-default.cnf 文件</p><blockquote><p>vi /etc/my.cnf</p></blockquote><p>my-default.cnf<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># For advice on how to change settings please see</span><br><span class="line">#  </span><br><span class="line"># *** DO NOT EDIT THIS FILE. It‘s a template which will be copied to the</span><br><span class="line"># *** default location during install, and will be replaced if you</span><br><span class="line"># *** upgrade to a newer version of MySQL.</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"># Remove leading # and set to the amount of RAM for the most important data</span><br><span class="line"># cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.</span><br><span class="line"># innodb_buffer_pool_size = 128M</span><br><span class="line"></span><br><span class="line"># Remove leading # to turn on a very important data integrity option: logging</span><br><span class="line"># changes to the binary log between backups.</span><br><span class="line"># log_bin</span><br><span class="line"></span><br><span class="line"># These are commonly set, remove the # and set as required.</span><br><span class="line"># basedir = .....</span><br><span class="line"># datadir = .....</span><br><span class="line"># port = .....</span><br><span class="line"># server_id = .....</span><br><span class="line"># socket = .....</span><br><span class="line"></span><br><span class="line"># Remove leading # to set options mainly useful for reporting servers.</span><br><span class="line"># The server defaults are faster for transactions and fast SELECTs.</span><br><span class="line"># Adjust sizes as needed, experiment to find the optimal values.</span><br><span class="line"># join_buffer_size = 128M</span><br><span class="line"># sort_buffer_size = 2M</span><br><span class="line"># read_rnd_buffer_size = 2M </span><br><span class="line"></span><br><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br></pre></td></tr></table></figure></p><p>my.cnf<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"># For advice on how to change settings please see</span><br><span class="line">#  </span><br><span class="line"># *** DO NOT EDIT THIS FILE. It‘s a template which will be copied to the</span><br><span class="line"># *** default location during install, and will be replaced if you</span><br><span class="line"># *** upgrade to a newer version of MySQL.</span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">default-character-set = utf8</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set = utf8</span><br><span class="line">socket = /var/lib/mysql/mysql.sock</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">character-set-server = utf8</span><br><span class="line"></span><br><span class="line"># Remove leading # and set to the amount of RAM for the most important data</span><br><span class="line"># cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.</span><br><span class="line"># innodb_buffer_pool_size = 128M</span><br><span class="line"></span><br><span class="line"># Remove leading # to turn on a very important data integrity option: logging</span><br><span class="line"># changes to the binary log between backups.</span><br><span class="line"># log_bin</span><br><span class="line"></span><br><span class="line"># These are commonly set, remove the # and set as required.</span><br><span class="line">basedir = /usr/local/mysql/</span><br><span class="line">datadir = /usr/local/mysql/data/</span><br><span class="line">port = 3306</span><br><span class="line">#server_id = </span><br><span class="line">socket = /var/lib/mysql/mysql.sock</span><br><span class="line"></span><br><span class="line"># Remove leading # to set options mainly useful for reporting servers.</span><br><span class="line"># The server defaults are faster for transactions and fast SELECTs.</span><br><span class="line"># Adjust sizes as needed, experiment to find the optimal values.</span><br><span class="line"># join_buffer_size = 128M</span><br><span class="line"># sort_buffer_size = 2M</span><br><span class="line"># read_rnd_buffer_size = 2M</span><br><span class="line">max_connections = 1000</span><br><span class="line"></span><br><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br></pre></td></tr></table></figure></p><hr><h2 id="初始化-MySQL-数据库"><a href="#初始化-MySQL-数据库" class="headerlink" title="初始化 MySQL 数据库"></a>初始化 MySQL 数据库</h2><p>初始化</p><blockquote><p>cd /usr/local/mysql<br>./bin/mysqld –user=mysql –basedir=/usr/local/mysql –datadir=/usr/local/mysql/data –initialize   </p></blockquote><p>输出如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">2018-07-18T07:06:49.223422Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).</span><br><span class="line">2018-07-18T07:06:49.223579Z 0 [Warning] &apos;NO_ZERO_DATE&apos;, &apos;NO_ZERO_IN_DATE&apos; and &apos;ERROR_FOR_DIVISION_BY_ZERO&apos; sql modes should be used with strict mode. They will be merged with strict mode in a future release.</span><br><span class="line">2018-07-18T07:06:49.223591Z 0 [Warning] &apos;NO_AUTO_CREATE_USER&apos; sql mode was not set.</span><br><span class="line">2018-07-18T07:06:50.630648Z 0 [Warning] InnoDB: New log files created, LSN=45790</span><br><span class="line">2018-07-18T07:06:51.000475Z 0 [Warning] InnoDB: Creating foreign key constraint system tables.</span><br><span class="line">2018-07-18T07:06:51.028751Z 0 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: 24e198b5-8a59-11e8-9a33-aeceb5cf96b1.</span><br><span class="line">2018-07-18T07:06:51.031122Z 0 [Warning] Gtid table is not ready to be used. Table &apos;mysql.gtid_executed&apos; cannot be opened.</span><br><span class="line">2018-07-18T07:06:51.045661Z 1 [Note] A temporary password is generated for root@localhost: Ra%p1C(&gt;7J(p</span><br></pre></td></tr></table></figure></p><p>添加 RSA Key </p><blockquote><p>cd /usr/local/mysql<br>bin/mysql_ssl_rsa_setup  –datadir=/usr/local/mysql/data<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Generating a 2048 bit RSA private key</span><br><span class="line">..+++</span><br><span class="line">.......................................................+++</span><br><span class="line">writing new private key to &apos;ca-key.pem&apos;</span><br><span class="line">-----</span><br><span class="line">Generating a 2048 bit RSA private key</span><br><span class="line">....................................................................+++</span><br><span class="line">...........................................................+++</span><br><span class="line">writing new private key to &apos;server-key.pem&apos;</span><br><span class="line">-----</span><br><span class="line">Generating a 2048 bit RSA private key</span><br><span class="line">..............................................................................................................................................+++</span><br><span class="line">..................................+++</span><br><span class="line">writing new private key to &apos;client-key.pem&apos;</span><br><span class="line">-----</span><br></pre></td></tr></table></figure></p></blockquote><p>编辑 /usr/local/mysql/support-files/mysql.server 文件</p><blockquote><p>vi /usr/local/mysql/support-files/mysql.server<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">修改 basedir = /usr/local/mysql/</span><br><span class="line">修改 datadir = /usr/local/mysql/data/</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p></blockquote><hr><h2 id="启动-MySQL-服务"><a href="#启动-MySQL-服务" class="headerlink" title="启动 MySQL 服务"></a>启动 MySQL 服务</h2><blockquote><p>cd /usr/local/mysql<br>./support-files/mysql.server start  </p></blockquote><p>注意：如果遇到以下问题，执行以下操作<br>Starting MySQL.Logging to ‘/usr/local/mysql/data/localhost.localdomain.err’.<br>2018-07-18T07:08:26.909710Z mysqld_safe Directory ‘/var/lib/mysql’ for UNIX socket file don’t exists. </p><blockquote><p>mkdir /var/lib/mysql<br>chown mysql:mysql /var/lib/mysql<br>cd /usr/local/mysql<br>./support-files/mysql.server start  </p></blockquote><p>Starting MySQL… SUCCESS!  </p><blockquote><p>./support-files/mysql.server stop  </p></blockquote><p>Shutting down MySQL… SUCCESS!  </p><blockquote><p>./support-files/mysql.server restart  </p></blockquote><p>Shutting down MySQL… SUCCESS!<br>Starting MySQL… SUCCESS!  </p><hr><h2 id="修改-Root-密码，开启远程访问"><a href="#修改-Root-密码，开启远程访问" class="headerlink" title="修改 Root 密码，开启远程访问"></a>修改 Root 密码，开启远程访问</h2><blockquote><p>cd /usr/local/mysql<br>./bin/mysqld_safe –skip-grant-tables –skip-networking&amp;  </p></blockquote><p>登陆</p><blockquote><p>cd /usr/local/mysql/bin<br>./mysql -uroot -p  </p></blockquote><p>修改密码、授权远程登陆</p><blockquote><p>mysql&gt;<br>set password=password(“123456”);<br>use mysql;<br>update user set host=’%’ where user=’root’;<br>GRANT ALL PRIVILEGES ON <em>.</em> TO ‘myuser‘@’%’ IDENTIFIED BY ‘mypwd’ WITH GRANT OPTION;<br>FLUSH PRIVILEGES;<br>exit;  </p></blockquote><p>重启 MySQL 服务  </p><blockquote><p>service mysql restart;  </p></blockquote><p>查看编码  </p><blockquote><p>show variables like ‘character%’;</p></blockquote><hr><h2 id="配置-MySQL-服务开机自动启动"><a href="#配置-MySQL-服务开机自动启动" class="headerlink" title="配置 MySQL 服务开机自动启动"></a>配置 MySQL 服务开机自动启动</h2><p>拷贝启动文件到 /etc/init.d/ 下并重命令为 mysqld  </p><blockquote><p>cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld  </p></blockquote><p>增加执行权限  </p><blockquote><p>chmod 755 /etc/init.d/mysqld  </p></blockquote><p>检查自启动项列表中没有 mysqld 这个，如果没有就添加 mysqld  </p><blockquote><p>chkconfig –list mysqld<br>chkconfig –add mysqld  </p></blockquote><p>设置MySQL在345等级自动启动</p><blockquote><p>chkconfig –level 345 mysqld on  </p></blockquote><p>或用这个命令设置开机启动:  </p><blockquote><p>chkconfig mysqld on  </p></blockquote><hr><h2 id="MySQL-服务的启动-重启-停止"><a href="#MySQL-服务的启动-重启-停止" class="headerlink" title="MySQL 服务的启动/重启/停止"></a>MySQL 服务的启动/重启/停止</h2><p>启动 MySQL 服务  </p><blockquote><p>service mysqld start  </p></blockquote><p>停止 MySQL 服务  </p><blockquote><p>service mysqld stop</p></blockquote><p>重启 MySQL 服务  </p><blockquote><p>service mysqld restart  </p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;MySQL 5.7.22 官方&lt;a href=&quot;https://dev.mysql.com/downloads/mysql/5.7.html#downloads&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;下载地址&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;清理-
      
    
    </summary>
    
      <category term="基础服务" scheme="http://leaveslm.github.io/categories/%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1/"/>
    
    
      <category term="mysql" scheme="http://leaveslm.github.io/tags/mysql/"/>
    
      <category term="linux" scheme="http://leaveslm.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Windows 安装 MySQL 5.7</title>
    <link href="http://leaveslm.github.io/2018/04/24/2018-2018-04-24-Windows-%E5%AE%89%E8%A3%85-MySQL-5-7/"/>
    <id>http://leaveslm.github.io/2018/04/24/2018-2018-04-24-Windows-安装-MySQL-5-7/</id>
    <published>2018-04-24T05:01:04.000Z</published>
    <updated>2018-07-18T09:26:13.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQL-5-7-xx-ZIP版本配置方案"><a href="#MySQL-5-7-xx-ZIP版本配置方案" class="headerlink" title="MySQL 5.7.xx ZIP版本配置方案"></a>MySQL 5.7.xx ZIP版本配置方案</h2><p>MySQL 5.7.22 官方<a href="https://dev.mysql.com/downloads/mysql/5.7.html#downloads" target="_blank" rel="noopener">下载地址</a><br><a href="http://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html" target="_blank" rel="noopener">MySQL 官方配置参数查询</a></p><h2 id="一、下载-MySQL-5-7-xx-zip-安装包"><a href="#一、下载-MySQL-5-7-xx-zip-安装包" class="headerlink" title="一、下载 MySQL 5.7.xx zip 安装包"></a><strong>一、下载 MySQL 5.7.xx zip 安装包</strong></h2><p>本机以 Windows10 64 位系统为例<br>进入 Oracel 官网，选择 MySQL Windows (x86, 64-bit), ZIP Archive 下载包<br><a href="http://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">点此下载</a>  </p><hr><h2 id="二、解压安装包"><a href="#二、解压安装包" class="headerlink" title="二、解压安装包"></a><strong>二、解压安装包</strong></h2><p>将MySQL数据库解压至目录 <strong>D:\Program Files\MySQL\mysql-5.7.xx-winx64</strong><br>将 <strong>D:\Program Files\MySQL\mysql-5.7.xx-winx64\bin</strong> 添加至环境变量 <strong>Path</strong> 中</p><hr><h2 id="三、创建一个空文件夹，命名为“data”，用来存放数据"><a href="#三、创建一个空文件夹，命名为“data”，用来存放数据" class="headerlink" title="三、创建一个空文件夹，命名为“data”，用来存放数据"></a><strong>三、创建一个空文件夹，命名为“data”，用来存放数据</strong></h2><p>本机创建在 D:\Program Files\MySQL\mysql-5.7.xx-winx64 目录下，所以最后会看到<strong>D:\Program Files\MySQL\mysql-5.7.xx-winx64\data</strong>，此文件夹后面会有用到  </p><hr><h2 id="四、配置启动配置文件"><a href="#四、配置启动配置文件" class="headerlink" title="四、配置启动配置文件"></a><strong>四、配置启动配置文件</strong></h2><p>把 D:\Program Files\MySQL\mysql-5.7.xx-winx64\my-default.ini 文件复制一份，重新命名为 <strong>my.ini</strong>，修改里面的几个参数， 配置文件如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"># For advice on how to change settings please see</span><br><span class="line"># http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html</span><br><span class="line"># *** DO NOT EDIT THIS FILE. It&apos;s a template which will be copied to the</span><br><span class="line"># *** default location during install, and will be replaced if you</span><br><span class="line"># *** upgrade to a newer version of MySQL.</span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">character-set-server=utf8</span><br><span class="line"></span><br><span class="line"># Remove leading # and set to the amount of RAM for the most important data</span><br><span class="line"># cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.</span><br><span class="line"># innodb_buffer_pool_size = 128M</span><br><span class="line"></span><br><span class="line"># Remove leading # to turn on a very important data integrity option: logging</span><br><span class="line"># changes to the binary log between backups.</span><br><span class="line"># log_bin</span><br><span class="line"></span><br><span class="line"># These are commonly set, remove the # and set as required.</span><br><span class="line"># server_id = .....</span><br><span class="line"># MySQL 安装目录</span><br><span class="line">basedir = D:\Program Files\MySQL\mysql-5.7.22-winx64</span><br><span class="line"># MySQL 数据库数据存放目录</span><br><span class="line">datadir = D:\Program Files\MySQL\mysql-5.7.22-winx64\data</span><br><span class="line"># MySQL 端口</span><br><span class="line">port = 3306</span><br><span class="line"># 允许最大连接数，默认200</span><br><span class="line">max_connections=200</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Remove leading # to set options mainly useful for reporting servers.</span><br><span class="line"># The server defaults are faster for transactions and fast SELECTs.</span><br><span class="line"># Adjust sizes as needed, experiment to find the optimal values.</span><br><span class="line"># join_buffer_size = 128M</span><br><span class="line"># sort_buffer_size = 2M</span><br><span class="line"># read_rnd_buffer_size = 2M</span><br><span class="line"></span><br><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br><span class="line"></span><br><span class="line"># 创建新表时将使用的默认存储引擎</span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line"></span><br><span class="line"># explicit_defaults_for_timestamp=true</span><br></pre></td></tr></table></figure><h2 id="五、初始化数据目录"><a href="#五、初始化数据目录" class="headerlink" title="五、初始化数据目录"></a><strong>五、初始化数据目录</strong></h2><ul><li><strong>管理员身份</strong>打开 CMD;  </li><li>当前路径定位到 <strong>D:\Program Files\MySQL\mysql-5.7.xx-winx64\bin</strong>  </li><li>按照mysql官方文档给出的步骤还有一步 Selecting a MySQL Server Type，就是选择用 mysqld 还是 mysqld-debug.</li></ul><p>一般使用如下命令：</p><blockquote><p>mysqld –defaults-file=”D:\Program Files\MySQL\mysql-5.7.xx-winx64\my.ini” –initialize-insecure</p></blockquote><p>注：  </p><ul><li>这个命令很重要，它会初始化 data 目录，在执行此命令前请先把 data 目录下的所有文件先删除，否则会失败；</li><li>可以选择用 –initialize-insecure 或者 –initialize 来初始化，–initialize-insecure 初始化 root 密码为空，如果用 –initialize 来初始化，会产生一个随机密码；</li><li>执行成功后你会在 data 目录 下看到 mysql，perofrmance_schema，sys 目录，同时还会有一些文件。</li></ul><hr><h2 id="六、安装-mysql-服务"><a href="#六、安装-mysql-服务" class="headerlink" title="六、安装 mysql 服务"></a><strong>六、安装 mysql 服务</strong></h2><blockquote><p>mysqld -install<br>mysqld -remove （出问题重新配置前需要卸载服务）</p></blockquote><hr><h2 id="七、启动-mysql-服务、添加初始密码"><a href="#七、启动-mysql-服务、添加初始密码" class="headerlink" title="七、启动 mysql 服务、添加初始密码"></a><strong>七、启动 mysql 服务、添加初始密码</strong></h2><blockquote><p>net start mysql<br>mysqladmin -u root password 123456<br>mysql -u root -p  </p></blockquote><hr><h2 id="八、设置默认编码"><a href="#八、设置默认编码" class="headerlink" title="八、设置默认编码"></a><strong>八、设置默认编码</strong></h2><p>先确保my.ini添加以下代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">default-character-set=utf8  或者  character-set-server=utf8</span><br></pre></td></tr></table></figure></p><p>通过命令查看数据库当前编码</p><blockquote><p>mysql -u root -p<br>show variables like ‘character%’;</p></blockquote><p>如果不是以下编码，则设置编码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+--------------------------+------------------------------------------------------------+</span><br><span class="line">| Variable_name            | Value                                                      |</span><br><span class="line">+--------------------------+------------------------------------------------------------+</span><br><span class="line">| character_set_client     | utf8                                                       |</span><br><span class="line">| character_set_connection | utf8                                                       |</span><br><span class="line">| character_set_database   | utf8                                                       |</span><br><span class="line">| character_set_filesystem | binary                                                     |</span><br><span class="line">| character_set_results    | utf8                                                       |</span><br><span class="line">| character_set_server     | utf8                                                       |</span><br><span class="line">| character_set_system     | utf8                                                       |</span><br><span class="line">| character_sets_dir       | D:\Program Files\MySQL\mysql-5.7.22-winx64\share\charsets\ |</span><br><span class="line">+--------------------------+------------------------------------------------------------+</span><br><span class="line">8 rows in set, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure></p><p>设置编码：  </p><blockquote><p>SET character_set_client = utf8;<br>SET character_set_connection = utf8;<br>SET character_set_database = utf8;<br>SET character_set_results = utf8;<br>SET character_set_server = utf8;  </p></blockquote><ul><li>character_set_client为客户端编码方式；  </li><li>character_set_connection为建立连接使用的编码；  </li><li>character_set_database数据库的编码；  </li><li>character_set_results结果集的编码；  </li><li>character_set_server数据库服务器的编码；  </li></ul><hr><h2 id="九、mysql-开启远程连接"><a href="#九、mysql-开启远程连接" class="headerlink" title="九、mysql 开启远程连接"></a><strong>九、mysql 开启远程连接</strong></h2><blockquote><p>grant all privileges on *.* to ‘root‘@’%’ identified by ‘123456’ with grant option;</p></blockquote><p>后记：<br>如果中途有什么步骤失败，一定要执行 mysql 移除命令，然后删除 data 目录下的所有文件，然后删除服务 mysqld -remove<br>特别提醒：5.7 和 5.6 不太相同，要自己初始化数据 data 目录，不然启动不会成功</p><hr><h2 id="十、后记"><a href="#十、后记" class="headerlink" title="十、后记"></a><strong>十、后记</strong></h2><p>mysql 安装完后可能会用到的语句<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">alter user &apos;root&apos;@&apos;localhost&apos; identified by &apos;123&apos;;</span><br><span class="line">create database victor;</span><br><span class="line">create user &apos;victor&apos;@&apos;localhost&apos; identified by &apos;victor@123&apos;;</span><br><span class="line">flush privileges;</span><br><span class="line">creaet user &apos;victorremote&apos;@&apos;%&apos; identified by &apos;victorremote@123&apos;;</span><br><span class="line">flush privileges;</span><br><span class="line">grant all on victor.* to &apos;victor&apos;@&apos;localhost&apos; identified by &apos;victor@123&apos;;</span><br><span class="line">flush privileges;</span><br><span class="line">grant all on victor.* to &apos;victorremote&apos;@&apos;%&apos; identified by &apos;victorremote@123&apos;;</span><br><span class="line">flush privileges;</span><br><span class="line"></span><br><span class="line">################################</span><br><span class="line">#连接最大空闲时长</span><br><span class="line">SHOW GLOBAL VARIABLES LIKE &apos;wait_timeout&apos;;</span><br><span class="line">#最大连接数</span><br><span class="line">SHOW VARIABLES LIKE &apos;%max_connections%&apos;;</span><br><span class="line">SET GLOBAL max_connections = 200;</span><br><span class="line">#字符编码</span><br><span class="line">SHOW VARIABLES WHERE Variable_name LIKE &apos;character\_set\_%&apos; OR Variable_name LIKE &apos;collation%&apos;;</span><br><span class="line">SHOW GLOBAL STATUS LIKE &apos;innodb_buffer_pool_pages_%&apos;;</span><br><span class="line">SHOW PROCESSLIST;</span><br><span class="line">SHOW STATUS LIKE &apos;Table%&apos;;</span><br><span class="line">SHOW STATUS LIKE &apos;%lock%&apos;;</span><br><span class="line">################################</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;MySQL-5-7-xx-ZIP版本配置方案&quot;&gt;&lt;a href=&quot;#MySQL-5-7-xx-ZIP版本配置方案&quot; class=&quot;headerlink&quot; title=&quot;MySQL 5.7.xx ZIP版本配置方案&quot;&gt;&lt;/a&gt;MySQL 5.7.xx ZIP版本配置
      
    
    </summary>
    
      <category term="基础服务" scheme="http://leaveslm.github.io/categories/%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1/"/>
    
    
      <category term="windows" scheme="http://leaveslm.github.io/tags/windows/"/>
    
      <category term="mysql" scheme="http://leaveslm.github.io/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>地图坐标转换</title>
    <link href="http://leaveslm.github.io/2017/09/24/2017-2017-09-24-%E5%9C%B0%E5%9B%BE%E5%9D%90%E6%A0%87%E8%BD%AC%E6%8D%A2/"/>
    <id>http://leaveslm.github.io/2017/09/24/2017-2017-09-24-地图坐标转换/</id>
    <published>2017-09-24T07:32:06.000Z</published>
    <updated>2018-07-31T09:08:43.406Z</updated>
    
    <content type="html"><![CDATA[<h2 id="问题来源"><a href="#问题来源" class="headerlink" title="问题来源"></a>问题来源</h2><p>目前 IoT 领域各种智能设备都可以采集 GPS 数据，但是设备采集到的GPS都是 WGS-84 坐标系数据，在国内不能直接用于在地图上显示，需要进行一定转换。各地图工具都有坐标转换 API 可用，但是成千上万的 GPS 数据通过 API 转换是一件很消耗资源的事，所以需要提供一种离线转换的方式。</p><p>本人在项目中曾也用过 API 转换的方式，但是当设备数量一增加，在坐标转换这一个小功能上带来了巨大的资源开销，是一件很不划算事，因此想到利用算法替换 API 方式进行坐标转换。在查阅了一些资料和自己的整理后，进行了一下总结。</p><h2 id="大地坐标系（WGS-84）"><a href="#大地坐标系（WGS-84）" class="headerlink" title="大地坐标系（WGS-84）"></a>大地坐标系（WGS-84）</h2><p>大地坐标系是大地测量中以参考椭球面为基准面建立起来的坐标系。地面点的位置用大地经度、大地纬度和大地高度表示。大地坐标系的确立包括选择一个椭球、对椭球进行定位和确定大地起算数据。</p><h2 id="火星坐标系（GCJ-02）"><a href="#火星坐标系（GCJ-02）" class="headerlink" title="火星坐标系（GCJ-02）"></a>火星坐标系（GCJ-02）</h2><p>是一种国家保密插件，也叫做加密插件或者加偏或者SM模组，其实就是对真实坐标系统进行人为的加偏处理，按照特殊的算法，将真实的坐标加密成虚假的坐标，而这个加偏并不是线性的加偏，所以各地的偏移情况都会有所不同。而加密后的坐标也常被人称为火星坐标系统。<br>所有的电子地图、导航设备，都需要加入国家保密插件。第一步，地图公司测绘地图，测绘完成后，送到国家测绘局，将真实坐标的电子地图，加密成“火星坐标”，这样的地图才是可以出版和发布的，然后才可以让GPS公司处理。第二步，所有的GPS公司，只要需要汽车导航的，需要用到导航电子地图的，都需要在软件中加入国家保密算法，将COM口读出来的真实的坐标信号，加密转换成国家要求的保密的坐标。这样，GPS导航仪和导航电子地图就可以完全匹配，GPS也就可以正常工作了。</p><h2 id="百度坐标系（BD-09）"><a href="#百度坐标系（BD-09）" class="headerlink" title="百度坐标系（BD-09）"></a>百度坐标系（BD-09）</h2><p>百度坐标对火星坐标系进行了一次加密，形成了百度坐标系。</p><h2 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h2><p>附上坐标转化详细 Java 版代码，Java 版本最低要求 Java 8<br>代码中也提供了两种判断 WGS-84 坐标点是否在国内的方法，一种是很粗略的判断，另一种较为精确，但沿海、国界周边地区可能会有误差，更高精度需要自行调整坐标点。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GpsCoordinateUtil</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//private static final double PI = 3.1415926535897932384626433832795;</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">double</span> PI = <span class="number">3.14159265358979324</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">double</span> A = <span class="number">6378245.0</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">double</span> EE = <span class="number">0.00669342162296594323</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 地球坐标系 WGS-84 to 火星坐标系 GCJ-02</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> latitude  纬度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> longitude 经度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> [纬度, 经度]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span>[] calWGS84toGCJ02(<span class="keyword">double</span> latitude, <span class="keyword">double</span> longitude) &#123;</span><br><span class="line">        Point dev = calDev(latitude, longitude);</span><br><span class="line">        <span class="keyword">double</span> retLat = latitude + dev.getLatitude();</span><br><span class="line">        <span class="keyword">double</span> retLon = longitude + dev.getLongitude();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">double</span>[]&#123;retLat, retLon&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 地球坐标系 WGS-84 to 百度坐标系 BD-09</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> latitude  纬度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> longitude 经度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> [纬度, 经度]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span>[] calWGS84toBD09(<span class="keyword">double</span> latitude, <span class="keyword">double</span> longitude) &#123;</span><br><span class="line">        Point dev = calDev(latitude, longitude);</span><br><span class="line">        <span class="keyword">double</span> retLat = latitude + dev.getLatitude();</span><br><span class="line">        <span class="keyword">double</span> retLon = longitude + dev.getLongitude();</span><br><span class="line">        <span class="keyword">return</span> calGCJ02toBD09(retLat, retLon);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 火星坐标系 GCJ-02 to 地球坐标系 WGS-84</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> latitude  纬度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> longitude 经度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> [纬度, 经度]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span>[] calGCJ02toWGS84(<span class="keyword">double</span> latitude, <span class="keyword">double</span> longitude) &#123;</span><br><span class="line">        Point dev = calDev(latitude, longitude);</span><br><span class="line">        <span class="keyword">double</span> retLat = latitude - dev.getLatitude();</span><br><span class="line">        <span class="keyword">double</span> retLon = longitude - dev.getLongitude();</span><br><span class="line">        dev = calDev(retLat, retLon);</span><br><span class="line">        retLat = latitude - dev.getLatitude();</span><br><span class="line">        retLon = longitude - dev.getLongitude();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">double</span>[]&#123;retLat, retLon&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 百度坐标系 BD-09 to 地球坐标系 WGS-84</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> latitude  纬度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> longitude 经度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> [纬度, 经度]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span>[] calBD09toWGS84(<span class="keyword">double</span> latitude, <span class="keyword">double</span> longitude) &#123;</span><br><span class="line">        <span class="keyword">double</span>[] gcj = calBD09toGCJ02(latitude, longitude);</span><br><span class="line">        <span class="keyword">return</span> calGCJ02toWGS84(gcj[<span class="number">0</span>], gcj[<span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Point <span class="title">calDev</span><span class="params">(<span class="keyword">double</span> latitude, <span class="keyword">double</span> longitude)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (isOutOfChina(latitude, longitude, <span class="keyword">false</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Point(latitude, latitude);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">double</span> dLat = calLat(longitude - <span class="number">105.0</span>, latitude - <span class="number">35.0</span>);</span><br><span class="line">        <span class="keyword">double</span> dLon = calLon(longitude - <span class="number">105.0</span>, latitude - <span class="number">35.0</span>);</span><br><span class="line">        <span class="keyword">double</span> radLat = latitude / <span class="number">180.0</span> * PI;</span><br><span class="line">        <span class="keyword">double</span> magic = Math.sin(radLat);</span><br><span class="line">        magic = <span class="number">1</span> - EE * magic * magic;</span><br><span class="line">        <span class="keyword">double</span> sqrtMagic = Math.sqrt(magic);</span><br><span class="line">        dLat = (dLat * <span class="number">180.0</span>) / ((A * (<span class="number">1</span> - EE)) / (magic * sqrtMagic) * PI);</span><br><span class="line">        dLon = (dLon * <span class="number">180.0</span>) / (A / sqrtMagic * Math.cos(radLat) * PI);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Point(dLat, dLon);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">calLat</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> ret = -<span class="number">100.0</span> + <span class="number">2.0</span> * x + <span class="number">3.0</span> * y + <span class="number">0.2</span> * y * y + <span class="number">0.1</span> * x * y + <span class="number">0.2</span> * Math.sqrt(Math.abs(x));</span><br><span class="line">        ret += (<span class="number">20.0</span> * Math.sin(<span class="number">6.0</span> * x * PI) + <span class="number">20.0</span> * Math.sin(<span class="number">2.0</span> * x * PI)) * <span class="number">2.0</span> / <span class="number">3.0</span>;</span><br><span class="line">        ret += (<span class="number">20.0</span> * Math.sin(y * PI) + <span class="number">40.0</span> * Math.sin(y / <span class="number">3.0</span> * PI)) * <span class="number">2.0</span> / <span class="number">3.0</span>;</span><br><span class="line">        ret += (<span class="number">160.0</span> * Math.sin(y / <span class="number">12.0</span> * PI) + <span class="number">320</span> * Math.sin(y * PI / <span class="number">30.0</span>)) * <span class="number">2.0</span> / <span class="number">3.0</span>;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">calLon</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">double</span> ret = <span class="number">300.0</span> + x + <span class="number">2.0</span> * y + <span class="number">0.1</span> * x * x + <span class="number">0.1</span> * x * y + <span class="number">0.1</span> * Math.sqrt(Math.abs(x));</span><br><span class="line">        ret += (<span class="number">20.0</span> * Math.sin(<span class="number">6.0</span> * x * PI) + <span class="number">20.0</span> * Math.sin(<span class="number">2.0</span> * x * PI)) * <span class="number">2.0</span> / <span class="number">3.0</span>;</span><br><span class="line">        ret += (<span class="number">20.0</span> * Math.sin(x * PI) + <span class="number">40.0</span> * Math.sin(x / <span class="number">3.0</span> * PI)) * <span class="number">2.0</span> / <span class="number">3.0</span>;</span><br><span class="line">        ret += (<span class="number">150.0</span> * Math.sin(x / <span class="number">12.0</span> * PI) + <span class="number">300.0</span> * Math.sin(x / <span class="number">30.0</span> * PI)) * <span class="number">2.0</span> / <span class="number">3.0</span>;</span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 火星坐标系 GCJ-02 to 百度坐标系 BD-09</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> latitude  纬度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> longitude 经度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> [纬度, 经度]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span>[] calGCJ02toBD09(<span class="keyword">double</span> latitude, <span class="keyword">double</span> longitude) &#123;</span><br><span class="line">        <span class="keyword">double</span> x = longitude, y = latitude;</span><br><span class="line">        <span class="keyword">double</span> z = Math.sqrt(x * x + y * y) + <span class="number">0.00002</span> * Math.sin(y * PI);</span><br><span class="line">        <span class="keyword">double</span> theta = Math.atan2(y, x) + <span class="number">0.000003</span> * Math.cos(x * PI);</span><br><span class="line">        <span class="keyword">double</span> retLat = z * Math.sin(theta) + <span class="number">0.006</span>;</span><br><span class="line">        <span class="keyword">double</span> retLon = z * Math.cos(theta) + <span class="number">0.0065</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">double</span>[]&#123;retLat, retLon&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 百度坐标系 BD-09 to 火星坐标系 GCJ-02</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> latitude  纬度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> longitude 经度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> [纬度, 经度]</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span>[] calBD09toGCJ02(<span class="keyword">double</span> latitude, <span class="keyword">double</span> longitude) &#123;</span><br><span class="line">        <span class="keyword">double</span> x = longitude - <span class="number">0.0065</span>, y = latitude - <span class="number">0.006</span>;</span><br><span class="line">        <span class="keyword">double</span> z = Math.sqrt(x * x + y * y) - <span class="number">0.00002</span> * Math.sin(y * PI);</span><br><span class="line">        <span class="keyword">double</span> theta = Math.atan2(y, x) - <span class="number">0.000003</span> * Math.cos(x * PI);</span><br><span class="line">        <span class="keyword">double</span> retLat = z * Math.sin(theta);</span><br><span class="line">        <span class="keyword">double</span> retLon = z * Math.cos(theta);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="keyword">double</span>[]&#123;retLat, retLon&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 判断坐标是否在国内</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> latitude</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> longitude</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> precision 是否精确判断范围</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true 在国外，false 在国内</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isOutOfChina</span><span class="params">(<span class="keyword">double</span> latitude, <span class="keyword">double</span> longitude, <span class="keyword">boolean</span> precision)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (precision) &#123;</span><br><span class="line">            <span class="keyword">return</span> CHINA_POLYGON.stream().noneMatch(point -&gt; pointInPolygon(point, latitude, longitude));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (longitude &lt; <span class="number">72.004</span> || longitude &gt; <span class="number">137.8347</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (latitude &lt; <span class="number">0.8293</span> || latitude &gt; <span class="number">55.8271</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 检查坐标点是否在多边形区域内</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> polygon   多边形</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> latitude  纬度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> longitude 经度</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> true 在多边形区域内，false 在多边形区域外</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">pointInPolygon</span><span class="params">(Point[] polygon, <span class="keyword">double</span> latitude, <span class="keyword">double</span> longitude)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> i, j = polygon.length - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">boolean</span> oddNodes = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; polygon.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ((polygon[i].getLatitude() &lt; latitude &amp;&amp; polygon[j].getLatitude() &gt;= latitude</span><br><span class="line">                    || polygon[j].getLatitude() &lt; latitude &amp;&amp; polygon[i].getLatitude() &gt;= latitude)</span><br><span class="line">                    &amp;&amp; (polygon[i].getLongitude() &lt;= longitude || polygon[j].getLongitude() &lt;= longitude)) &#123;</span><br><span class="line">                <span class="keyword">if</span> (polygon[i].getLongitude()</span><br><span class="line">                        + (latitude - polygon[i].getLatitude()) / (polygon[j].getLatitude() - polygon[i].getLatitude())</span><br><span class="line">                        * (polygon[j].getLongitude() - polygon[i].getLongitude())</span><br><span class="line">                        &lt; longitude) &#123;</span><br><span class="line">                    oddNodes = !oddNodes;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            j = i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> oddNodes;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">double</span> longitude;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">double</span> latitude;</span><br><span class="line"></span><br><span class="line">        Point(<span class="keyword">double</span> latitude, <span class="keyword">double</span> longitude) &#123;</span><br><span class="line">            <span class="keyword">this</span>.longitude = longitude;</span><br><span class="line">            <span class="keyword">this</span>.latitude = latitude;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getLongitude</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> longitude;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLongitude</span><span class="params">(<span class="keyword">double</span> longitude)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.longitude = longitude;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getLatitude</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> latitude;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLatitude</span><span class="params">(<span class="keyword">double</span> latitude)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.latitude = latitude;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> longitude + <span class="string">","</span> + latitude;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//region 中国行政边界的WGS84坐标数据</span></span><br><span class="line">    <span class="comment">//Mainland</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Point[] MAINLAND = <span class="keyword">new</span> Point[]&#123;</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.32083</span>, <span class="number">88.91693</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.54243</span>, <span class="number">88.76464</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.00805</span>, <span class="number">88.83575</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.1168</span>, <span class="number">88.62435</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.86605</span>, <span class="number">88.14279</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.82305</span>, <span class="number">87.19275</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.11166</span>, <span class="number">86.69527</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.90888</span>, <span class="number">86.45137</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.15805</span>, <span class="number">86.19769</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.88625</span>, <span class="number">86.0054</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.27916</span>, <span class="number">85.72137</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.30666</span>, <span class="number">85.11095</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.59104</span>, <span class="number">85.19518</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.54444</span>, <span class="number">84.84665</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.73402</span>, <span class="number">84.48623</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.26097</span>, <span class="number">84.11651</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.18902</span>, <span class="number">83.5479</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.63166</span>, <span class="number">83.19109</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.06923</span>, <span class="number">82.17525</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.33444</span>, <span class="number">82.11123</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.385</span>, <span class="number">81.42623</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.01194</span>, <span class="number">81.23221</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.20435</span>, <span class="number">81.02536</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.57552</span>, <span class="number">80.207</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.73374</span>, <span class="number">80.25423</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.96583</span>, <span class="number">79.86304</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.95708</span>, <span class="number">79.55429</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">31.43729</span>, <span class="number">79.08082</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">31.30895</span>, <span class="number">78.76825</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">31.96847</span>, <span class="number">78.77075</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">32.24304</span>, <span class="number">78.47594</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">32.5561</span>, <span class="number">78.40595</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">32.63902</span>, <span class="number">78.74623</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">32.35083</span>, <span class="number">78.9711</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">32.75666</span>, <span class="number">79.52874</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">33.09944</span>, <span class="number">79.37511</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">33.42863</span>, <span class="number">78.93623</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">33.52041</span>, <span class="number">78.81387</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">34.06833</span>, <span class="number">78.73581</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">34.35001</span>, <span class="number">78.98535</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">34.6118</span>, <span class="number">78.33707</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">35.28069</span>, <span class="number">78.02305</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">35.49902</span>, <span class="number">78.0718</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">35.50133</span>, <span class="number">77.82393</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">35.6125</span>, <span class="number">76.89526</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">35.90665</span>, <span class="number">76.55304</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">35.81458</span>, <span class="number">76.18061</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">36.07082</span>, <span class="number">75.92887</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">36.23751</span>, <span class="number">76.04166</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">36.66343</span>, <span class="number">75.85984</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">36.73169</span>, <span class="number">75.45179</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">36.91156</span>, <span class="number">75.39902</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">36.99719</span>, <span class="number">75.14787</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.02782</span>, <span class="number">74.56543</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.17</span>, <span class="number">74.39089</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.23733</span>, <span class="number">74.91574</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.40659</span>, <span class="number">75.18748</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.65243</span>, <span class="number">74.9036</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">38.47256</span>, <span class="number">74.85442</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">38.67438</span>, <span class="number">74.35471</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">38.61271</span>, <span class="number">73.81401</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">38.88653</span>, <span class="number">73.70818</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">38.97256</span>, <span class="number">73.85235</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">39.23569</span>, <span class="number">73.62005</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">39.45483</span>, <span class="number">73.65569</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">39.59965</span>, <span class="number">73.95471</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">39.76896</span>, <span class="number">73.8429</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">40.04202</span>, <span class="number">73.99096</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">40.32792</span>, <span class="number">74.88089</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">40.51723</span>, <span class="number">74.8588</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">40.45042</span>, <span class="number">75.23394</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">40.64452</span>, <span class="number">75.58284</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">40.298</span>, <span class="number">75.70374</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">40.35324</span>, <span class="number">76.3344</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">41.01258</span>, <span class="number">76.87067</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">41.04079</span>, <span class="number">78.08083</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">41.39286</span>, <span class="number">78.39554</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.03954</span>, <span class="number">80.24513</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.19622</span>, <span class="number">80.23402</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.63245</span>, <span class="number">80.15804</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.81565</span>, <span class="number">80.25796</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.88545</span>, <span class="number">80.57226</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">43.02906</span>, <span class="number">80.38405</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">43.1683</span>, <span class="number">80.81526</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">44.11378</span>, <span class="number">80.36887</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">44.6358</span>, <span class="number">80.38499</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">44.73408</span>, <span class="number">80.51589</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">44.90282</span>, <span class="number">79.87106</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.3497</span>, <span class="number">81.67928</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.15748</span>, <span class="number">81.94803</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.13303</span>, <span class="number">82.56638</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.43581</span>, <span class="number">82.64624</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.5831</span>, <span class="number">82.32179</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.20061</span>, <span class="number">83.03443</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.97332</span>, <span class="number">83.93026</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.99361</span>, <span class="number">84.67804</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.8277</span>, <span class="number">84.80318</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.0591</span>, <span class="number">85.52257</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.26221</span>, <span class="number">85.70139</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.93721</span>, <span class="number">85.53707</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.39333</span>, <span class="number">85.76596</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.54277</span>, <span class="number">86.59791</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">49.1102</span>, <span class="number">86.87602</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">49.09262</span>, <span class="number">87.34821</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">49.17295</span>, <span class="number">87.8407</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.98304</span>, <span class="number">87.89291</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.88103</span>, <span class="number">87.7611</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.73499</span>, <span class="number">88.05942</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.56541</span>, <span class="number">87.99194</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.40582</span>, <span class="number">88.51679</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.21193</span>, <span class="number">88.61179</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.99374</span>, <span class="number">89.08514</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.88791</span>, <span class="number">90.07096</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.95221</span>, <span class="number">90.9136</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.57735</span>, <span class="number">91.07027</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.29694</span>, <span class="number">90.92151</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.01735</span>, <span class="number">91.02651</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.57972</span>, <span class="number">90.68193</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.25305</span>, <span class="number">90.89694</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.07729</span>, <span class="number">91.56088</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">44.95721</span>, <span class="number">93.5547</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">44.35499</span>, <span class="number">94.71735</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">44.29416</span>, <span class="number">95.41061</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">44.01937</span>, <span class="number">95.34109</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">43.99311</span>, <span class="number">95.53339</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">43.28388</span>, <span class="number">95.87901</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.73499</span>, <span class="number">96.38206</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.79583</span>, <span class="number">97.1654</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.57194</span>, <span class="number">99.51012</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.67707</span>, <span class="number">100.8425</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.50972</span>, <span class="number">101.8147</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.23333</span>, <span class="number">102.0772</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">41.88721</span>, <span class="number">103.4164</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">41.87721</span>, <span class="number">104.5267</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">41.67068</span>, <span class="number">104.5237</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">41.58666</span>, <span class="number">105.0065</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.46624</span>, <span class="number">107.4758</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.42999</span>, <span class="number">109.3107</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.64576</span>, <span class="number">110.1064</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">43.31694</span>, <span class="number">110.9897</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">43.69221</span>, <span class="number">111.9583</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">44.37527</span>, <span class="number">111.4214</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.04944</span>, <span class="number">111.873</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.08055</span>, <span class="number">112.4272</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">44.8461</span>, <span class="number">112.853</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">44.74527</span>, <span class="number">113.638</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.38943</span>, <span class="number">114.5453</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.4586</span>, <span class="number">115.7019</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.72193</span>, <span class="number">116.2104</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.29583</span>, <span class="number">116.5855</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.41888</span>, <span class="number">117.3755</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.57069</span>, <span class="number">117.425</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.53645</span>, <span class="number">117.8455</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.73638</span>, <span class="number">118.3147</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.59895</span>, <span class="number">119.7068</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.71513</span>, <span class="number">119.9315</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.90221</span>, <span class="number">119.9225</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.66499</span>, <span class="number">119.125</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.99475</span>, <span class="number">118.5393</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.01125</span>, <span class="number">117.8046</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.65741</span>, <span class="number">117.3827</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.88805</span>, <span class="number">116.8747</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.87819</span>, <span class="number">116.2624</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.69186</span>, <span class="number">115.9231</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.91749</span>, <span class="number">115.5944</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.14353</span>, <span class="number">115.5491</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.25249</span>, <span class="number">115.8358</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.52055</span>, <span class="number">115.8111</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">49.83047</span>, <span class="number">116.7114</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">49.52058</span>, <span class="number">117.8747</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">49.92263</span>, <span class="number">118.5746</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">50.09631</span>, <span class="number">119.321</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">50.33028</span>, <span class="number">119.36</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">50.39027</span>, <span class="number">119.1386</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">51.62083</span>, <span class="number">120.0641</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">52.115</span>, <span class="number">120.7767</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">52.34423</span>, <span class="number">120.6259</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">52.54267</span>, <span class="number">120.7122</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">52.58805</span>, <span class="number">120.0819</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">52.76819</span>, <span class="number">120.0314</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">53.26374</span>, <span class="number">120.8307</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">53.54361</span>, <span class="number">123.6147</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">53.18832</span>, <span class="number">124.4933</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">53.05027</span>, <span class="number">125.62</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">52.8752</span>, <span class="number">125.6573</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">52.75722</span>, <span class="number">126.0968</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">52.5761</span>, <span class="number">125.9943</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">52.12694</span>, <span class="number">126.555</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">51.99437</span>, <span class="number">126.4412</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">51.38138</span>, <span class="number">126.9139</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">51.26555</span>, <span class="number">126.8176</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">51.31923</span>, <span class="number">126.9689</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">51.05825</span>, <span class="number">126.9331</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">50.74138</span>, <span class="number">127.2919</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">50.31472</span>, <span class="number">127.334</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">50.20856</span>, <span class="number">127.5861</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">49.80588</span>, <span class="number">127.515</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">49.58665</span>, <span class="number">127.838</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">49.58443</span>, <span class="number">128.7119</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">49.34676</span>, <span class="number">129.1118</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">49.4158</span>, <span class="number">129.4902</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.86464</span>, <span class="number">130.2246</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.86041</span>, <span class="number">130.674</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.60576</span>, <span class="number">130.5236</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.3268</span>, <span class="number">130.824</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.10839</span>, <span class="number">130.6598</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.68721</span>, <span class="number">130.9922</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.71027</span>, <span class="number">132.5211</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.09888</span>, <span class="number">133.0827</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.06888</span>, <span class="number">133.4843</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.39112</span>, <span class="number">134.4153</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">48.26713</span>, <span class="number">134.7408</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.99207</span>, <span class="number">134.5576</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.70027</span>, <span class="number">134.7608</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">47.32333</span>, <span class="number">134.1825</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.64017</span>, <span class="number">133.9977</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.47888</span>, <span class="number">133.8472</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">46.25363</span>, <span class="number">133.9016</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.82347</span>, <span class="number">133.4761</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.62458</span>, <span class="number">133.4702</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.45083</span>, <span class="number">133.1491</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.05694</span>, <span class="number">133.0253</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">45.34582</span>, <span class="number">131.8684</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">44.97388</span>, <span class="number">131.4691</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">44.83649</span>, <span class="number">130.953</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">44.05193</span>, <span class="number">131.298</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">43.53624</span>, <span class="number">131.1912</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">43.38958</span>, <span class="number">131.3104</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.91645</span>, <span class="number">131.1285</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.74485</span>, <span class="number">130.4327</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.42186</span>, <span class="number">130.6044</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.71416</span>, <span class="number">130.2468</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.88794</span>, <span class="number">130.2514</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">43.00457</span>, <span class="number">129.9046</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.43582</span>, <span class="number">129.6955</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.44624</span>, <span class="number">129.3493</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.02736</span>, <span class="number">128.9269</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">42.00124</span>, <span class="number">128.0566</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">41.58284</span>, <span class="number">128.3002</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">41.38124</span>, <span class="number">128.1529</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">41.47249</span>, <span class="number">127.2708</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">41.79222</span>, <span class="number">126.9047</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">41.61176</span>, <span class="number">126.5661</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">40.89694</span>, <span class="number">126.0118</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">40.47037</span>, <span class="number">124.8851</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">40.09362</span>, <span class="number">124.3736</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">39.82777</span>, <span class="number">124.128</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">39.8143</span>, <span class="number">123.2422</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">39.67388</span>, <span class="number">123.2167</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">38.99638</span>, <span class="number">121.648</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">38.8611</span>, <span class="number">121.6982</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">38.71909</span>, <span class="number">121.1873</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">38.91221</span>, <span class="number">121.0887</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">39.09013</span>, <span class="number">121.6794</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">39.2186</span>, <span class="number">121.5994</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">39.35166</span>, <span class="number">121.7511</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">39.52847</span>, <span class="number">121.2283</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">39.62322</span>, <span class="number">121.533</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">39.81138</span>, <span class="number">121.4683</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">40.00305</span>, <span class="number">121.881</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">40.50562</span>, <span class="number">122.2987</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">40.73874</span>, <span class="number">122.0521</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">40.92194</span>, <span class="number">121.1775</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">40.1961</span>, <span class="number">120.4468</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">39.87242</span>, <span class="number">119.5264</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">39.15693</span>, <span class="number">118.9715</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">39.04083</span>, <span class="number">118.3273</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">39.19846</span>, <span class="number">117.889</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">38.67555</span>, <span class="number">117.5364</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">38.38666</span>, <span class="number">117.6722</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">38.16721</span>, <span class="number">118.0281</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">38.1529</span>, <span class="number">118.8378</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.87832</span>, <span class="number">119.0355</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.30054</span>, <span class="number">118.9566</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.14361</span>, <span class="number">119.2328</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.15138</span>, <span class="number">119.7672</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.35228</span>, <span class="number">119.8529</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.83499</span>, <span class="number">120.7371</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.42458</span>, <span class="number">121.58</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.55256</span>, <span class="number">122.1282</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.41833</span>, <span class="number">122.1814</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.39624</span>, <span class="number">122.5586</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.20999</span>, <span class="number">122.5972</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.02583</span>, <span class="number">122.4005</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.01978</span>, <span class="number">122.5392</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">36.89361</span>, <span class="number">122.5047</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">36.84298</span>, <span class="number">122.1923</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">37.00027</span>, <span class="number">121.9566</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">36.75889</span>, <span class="number">121.5944</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">36.61666</span>, <span class="number">120.7764</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">36.52638</span>, <span class="number">120.96</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">36.37582</span>, <span class="number">120.8753</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">36.42277</span>, <span class="number">120.7062</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">36.14075</span>, <span class="number">120.6956</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">36.0419</span>, <span class="number">120.3436</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">36.26345</span>, <span class="number">120.3078</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">36.19998</span>, <span class="number">120.0889</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">35.95943</span>, <span class="number">120.2378</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">35.57893</span>, <span class="number">119.6475</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">34.88499</span>, <span class="number">119.1761</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">34.31145</span>, <span class="number">120.2487</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">32.97499</span>, <span class="number">120.8858</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">32.63889</span>, <span class="number">120.8375</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">32.42958</span>, <span class="number">121.3348</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">32.11333</span>, <span class="number">121.4412</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">32.02166</span>, <span class="number">121.7066</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">31.67833</span>, <span class="number">121.8275</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">31.86639</span>, <span class="number">120.9444</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">32.09361</span>, <span class="number">120.6019</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">31.94555</span>, <span class="number">120.099</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">32.30638</span>, <span class="number">119.8267</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">32.26277</span>, <span class="number">119.6317</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">31.90388</span>, <span class="number">120.1364</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">31.98833</span>, <span class="number">120.7026</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">31.81944</span>, <span class="number">120.7196</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">31.30889</span>, <span class="number">121.6681</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.97986</span>, <span class="number">121.8828</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.85305</span>, <span class="number">121.8469</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.56889</span>, <span class="number">120.9915</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.33555</span>, <span class="number">120.8144</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.39298</span>, <span class="number">120.4586</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.19694</span>, <span class="number">120.15</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.31027</span>, <span class="number">120.5082</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.06465</span>, <span class="number">120.7916</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">30.30458</span>, <span class="number">121.2808</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.96305</span>, <span class="number">121.6778</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.88211</span>, <span class="number">122.1196</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.51167</span>, <span class="number">121.4483</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.58916</span>, <span class="number">121.9744</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.19527</span>, <span class="number">121.9336</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.18388</span>, <span class="number">121.8119</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.37236</span>, <span class="number">121.7969</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.19729</span>, <span class="number">121.7444</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.29111</span>, <span class="number">121.5611</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.1634</span>, <span class="number">121.4135</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.02194</span>, <span class="number">121.6914</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.9359</span>, <span class="number">121.4908</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.72798</span>, <span class="number">121.6113</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.84215</span>, <span class="number">121.1464</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.66993</span>, <span class="number">121.4844</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.34722</span>, <span class="number">121.6417</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.13889</span>, <span class="number">121.3419</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.38277</span>, <span class="number">121.1651</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.98222</span>, <span class="number">120.9353</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.07944</span>, <span class="number">120.5908</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.87229</span>, <span class="number">120.84</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.59319</span>, <span class="number">120.5812</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.45083</span>, <span class="number">120.6655</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.20777</span>, <span class="number">120.5075</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.28278</span>, <span class="number">120.1896</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.14764</span>, <span class="number">120.4211</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">26.89805</span>, <span class="number">120.0332</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">26.64465</span>, <span class="number">120.128</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">26.51778</span>, <span class="number">119.8603</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">26.78823</span>, <span class="number">120.0733</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">26.64888</span>, <span class="number">119.8668</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">26.79611</span>, <span class="number">119.7879</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">26.75625</span>, <span class="number">119.5503</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">26.44222</span>, <span class="number">119.8204</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">26.47388</span>, <span class="number">119.5775</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">26.33861</span>, <span class="number">119.658</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">26.36777</span>, <span class="number">119.9489</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.99694</span>, <span class="number">119.4253</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">26.14041</span>, <span class="number">119.0975</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.93788</span>, <span class="number">119.354</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.99069</span>, <span class="number">119.7058</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.67996</span>, <span class="number">119.5807</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.68222</span>, <span class="number">119.4522</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.35333</span>, <span class="number">119.6454</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.60649</span>, <span class="number">119.3149</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.42097</span>, <span class="number">119.1053</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.25319</span>, <span class="number">119.3526</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.17208</span>, <span class="number">119.2726</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.2426</span>, <span class="number">118.8749</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">24.97194</span>, <span class="number">118.9866</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">24.88291</span>, <span class="number">118.5729</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">24.75673</span>, <span class="number">118.7631</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">24.52861</span>, <span class="number">118.5953</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">24.53638</span>, <span class="number">118.2397</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">24.68194</span>, <span class="number">118.1688</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">24.44024</span>, <span class="number">118.0199</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">24.46019</span>, <span class="number">117.7947</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">24.25875</span>, <span class="number">118.1237</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.62437</span>, <span class="number">117.1957</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.65919</span>, <span class="number">116.9179</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.355</span>, <span class="number">116.7603</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.42024</span>, <span class="number">116.5322</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.23666</span>, <span class="number">116.7871</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.21083</span>, <span class="number">116.5139</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.93902</span>, <span class="number">116.4817</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.73916</span>, <span class="number">115.7978</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.88416</span>, <span class="number">115.6403</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.65889</span>, <span class="number">115.5367</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.80833</span>, <span class="number">115.1614</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.70277</span>, <span class="number">114.8889</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.53305</span>, <span class="number">114.8722</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.64027</span>, <span class="number">114.718</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.81402</span>, <span class="number">114.7782</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.69972</span>, <span class="number">114.5208</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.50423</span>, <span class="number">114.6136</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.55004</span>, <span class="number">114.2223</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.42993</span>, <span class="number">114.3885</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.26056</span>, <span class="number">114.2961</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.36736</span>, <span class="number">113.9056</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.50874</span>, <span class="number">114.0337</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.47444</span>, <span class="number">113.8608</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.83458</span>, <span class="number">113.606</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.05027</span>, <span class="number">113.5253</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.11724</span>, <span class="number">113.8219</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.05083</span>, <span class="number">113.4793</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.87986</span>, <span class="number">113.3629</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.54944</span>, <span class="number">113.5648</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.18701</span>, <span class="number">113.5527</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.56701</span>, <span class="number">113.1687</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.17965</span>, <span class="number">113.3868</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.04069</span>, <span class="number">113.2226</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.20485</span>, <span class="number">113.0848</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.8693</span>, <span class="number">112.94</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.96472</span>, <span class="number">112.824</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.70139</span>, <span class="number">112.2819</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.91611</span>, <span class="number">111.8921</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.75139</span>, <span class="number">111.9669</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.77819</span>, <span class="number">111.6762</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.61264</span>, <span class="number">111.7832</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.5268</span>, <span class="number">111.644</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.52528</span>, <span class="number">111.0285</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.21138</span>, <span class="number">110.5328</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.37322</span>, <span class="number">110.3944</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">20.84381</span>, <span class="number">110.1594</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">20.84083</span>, <span class="number">110.3755</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">20.64</span>, <span class="number">110.3239</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">20.48618</span>, <span class="number">110.5274</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">20.24611</span>, <span class="number">110.2789</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">20.2336</span>, <span class="number">109.9244</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">20.4318</span>, <span class="number">110.0069</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">20.92416</span>, <span class="number">109.6629</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.44694</span>, <span class="number">109.9411</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.50569</span>, <span class="number">109.6605</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.72333</span>, <span class="number">109.5733</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.49499</span>, <span class="number">109.5344</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.39666</span>, <span class="number">109.1428</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.58305</span>, <span class="number">109.1375</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.61611</span>, <span class="number">108.911</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.79889</span>, <span class="number">108.8702</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.59888</span>, <span class="number">108.7403</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.93562</span>, <span class="number">108.4692</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.59014</span>, <span class="number">108.5125</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.68999</span>, <span class="number">108.3336</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.51444</span>, <span class="number">108.2447</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.54241</span>, <span class="number">107.99</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.66694</span>, <span class="number">107.7831</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.60526</span>, <span class="number">107.3627</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.03083</span>, <span class="number">106.6933</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.45682</span>, <span class="number">106.5517</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.76389</span>, <span class="number">106.7875</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.86694</span>, <span class="number">106.7029</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.91253</span>, <span class="number">105.8771</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.32416</span>, <span class="number">105.3587</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.18027</span>, <span class="number">104.9075</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.81805</span>, <span class="number">104.7319</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.6875</span>, <span class="number">104.3747</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.79812</span>, <span class="number">104.1113</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.50387</span>, <span class="number">103.9687</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.78287</span>, <span class="number">103.6538</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.58436</span>, <span class="number">103.5224</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.79451</span>, <span class="number">103.3337</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.43652</span>, <span class="number">103.0304</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.77187</span>, <span class="number">102.4744</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.39629</span>, <span class="number">102.1407</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.49777</span>, <span class="number">101.7415</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.20916</span>, <span class="number">101.5744</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.83444</span>, <span class="number">101.7653</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.14451</span>, <span class="number">101.786</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.17687</span>, <span class="number">101.2919</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.57264</span>, <span class="number">101.1482</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.76903</span>, <span class="number">101.099</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.47694</span>, <span class="number">100.6397</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.43546</span>, <span class="number">100.2057</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.72555</span>, <span class="number">99.97763</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.05018</span>, <span class="number">99.95741</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.15592</span>, <span class="number">99.16785</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.93659</span>, <span class="number">99.56484</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.08204</span>, <span class="number">99.5113</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.18916</span>, <span class="number">98.92747</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.97076</span>, <span class="number">98.67991</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">24.16007</span>, <span class="number">98.89073</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.92999</span>, <span class="number">97.54762</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">24.26055</span>, <span class="number">97.7593</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">24.47666</span>, <span class="number">97.54305</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">24.73992</span>, <span class="number">97.55255</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.61527</span>, <span class="number">98.19109</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.56944</span>, <span class="number">98.36137</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.85597</span>, <span class="number">98.7104</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">26.12527</span>, <span class="number">98.56944</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">26.18472</span>, <span class="number">98.73109</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">26.79166</span>, <span class="number">98.77777</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.52972</span>, <span class="number">98.69699</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.6725</span>, <span class="number">98.45888</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.54014</span>, <span class="number">98.31992</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.14889</span>, <span class="number">98.14499</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.54652</span>, <span class="number">97.55887</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.22277</span>, <span class="number">97.34888</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.46749</span>, <span class="number">96.65387</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.35111</span>, <span class="number">96.40193</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.525</span>, <span class="number">96.34027</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.79569</span>, <span class="number">96.61373</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.05666</span>, <span class="number">96.47083</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.90138</span>, <span class="number">96.17532</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.05972</span>, <span class="number">96.14888</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.25757</span>, <span class="number">96.39172</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.46444</span>, <span class="number">96.08315</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.03527</span>, <span class="number">95.38777</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.33346</span>, <span class="number">94.64751</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">29.07348</span>, <span class="number">94.23456</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.6692</span>, <span class="number">93.96172</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.61876</span>, <span class="number">93.35194</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.3193</span>, <span class="number">93.22205</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.1419</span>, <span class="number">92.71044</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.86194</span>, <span class="number">92.54498</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.76472</span>, <span class="number">91.65776</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.945</span>, <span class="number">91.66277</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.08111</span>, <span class="number">91.30138</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.96999</span>, <span class="number">91.08693</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.07958</span>, <span class="number">90.3765</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.24257</span>, <span class="number">90.38898</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.32369</span>, <span class="number">89.99819</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">28.05777</span>, <span class="number">89.48749</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">27.32083</span>, <span class="number">88.91693</span>)</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Taiwan</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Point[] TAIWAN = <span class="keyword">new</span> Point[]&#123;</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.13474</span>, <span class="number">121.4441</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.28361</span>, <span class="number">121.5632</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.00722</span>, <span class="number">122.0004</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">24.85028</span>, <span class="number">121.8182</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">24.47638</span>, <span class="number">121.8397</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.0875</span>, <span class="number">121.3556</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">21.92791</span>, <span class="number">120.7196</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.31277</span>, <span class="number">120.6103</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">22.54044</span>, <span class="number">120.3071</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.04437</span>, <span class="number">120.0539</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">23.61708</span>, <span class="number">120.1112</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.00166</span>, <span class="number">121.0017</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">25.13474</span>, <span class="number">121.4441</span>)</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Hainan</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Point[] HAINAN = <span class="keyword">new</span> Point[]&#123;</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">19.52888</span>, <span class="number">110.855</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">19.16761</span>, <span class="number">110.4832</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">18.80083</span>, <span class="number">110.5255</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">18.3852</span>, <span class="number">110.0503</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">18.39152</span>, <span class="number">109.7594</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">18.19777</span>, <span class="number">109.7036</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">18.50562</span>, <span class="number">108.6871</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">19.28028</span>, <span class="number">108.6283</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">19.76</span>, <span class="number">109.2939</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">19.7236</span>, <span class="number">109.1653</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">19.89972</span>, <span class="number">109.2572</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">19.82861</span>, <span class="number">109.4658</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">19.99389</span>, <span class="number">109.6108</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">20.13361</span>, <span class="number">110.6655</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">19.97861</span>, <span class="number">110.9425</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">19.63829</span>, <span class="number">111.0215</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">19.52888</span>, <span class="number">110.855</span>)</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Chongming</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Point[] CHONGMING = <span class="keyword">new</span> Point[]&#123;</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">31.80054</span>, <span class="number">121.2039</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">31.49972</span>, <span class="number">121.8736</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">31.53111</span>, <span class="number">121.5464</span>),</span><br><span class="line">            <span class="keyword">new</span> Point(<span class="number">31.80054</span>, <span class="number">121.2039</span>)</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//endregion</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 中国行政边界的WGS84坐标数据，</span></span><br><span class="line"><span class="comment">     * 光线投射算法 (Ray casting algorithm) 获得，</span></span><br><span class="line"><span class="comment">     * 沿海、国界周边地区可能会有误差，更高精度需要调整坐标点</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> List&lt;Point[]&gt; CHINA_POLYGON = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        CHINA_POLYGON.add(MAINLAND);</span><br><span class="line">        CHINA_POLYGON.add(TAIWAN);</span><br><span class="line">        CHINA_POLYGON.add(HAINAN);</span><br><span class="line">        CHINA_POLYGON.add(CHONGMING);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// WGS84坐标: 30.256676, 120.149987</span></span><br><span class="line">        Point gps = <span class="keyword">new</span> Point(<span class="number">30.256676</span>, <span class="number">120.149987</span>);</span><br><span class="line">        System.out.println(<span class="string">"WGS84          : "</span> + gps);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span>[] wgsToGcj = calWGS84toGCJ02(gps.getLatitude(), gps.getLongitude());</span><br><span class="line">        System.out.println(<span class="string">"WGS84 -&gt; GCJ02 : "</span> + wgsToGcj[<span class="number">1</span>] + <span class="string">","</span> + wgsToGcj[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span>[] wgsToBd = calWGS84toBD09(gps.getLatitude(), gps.getLongitude());</span><br><span class="line">        System.out.println(<span class="string">"WGS84 -&gt; BD09  : "</span> + wgsToBd[<span class="number">1</span>] + <span class="string">","</span> + wgsToBd[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span>[] gcjToWgs = calGCJ02toWGS84(wgsToGcj[<span class="number">0</span>], wgsToGcj[<span class="number">1</span>]);</span><br><span class="line">        System.out.println(<span class="string">"GCJ02 -&gt; WGS84 : "</span> + gcjToWgs[<span class="number">1</span>] + <span class="string">","</span> + gcjToWgs[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span>[] bdToWgs = calBD09toWGS84(wgsToBd[<span class="number">0</span>], wgsToBd[<span class="number">1</span>]);</span><br><span class="line">        System.out.println(<span class="string">"BD09  -&gt; WGS84 : "</span> + bdToWgs[<span class="number">1</span>] + <span class="string">","</span> + bdToWgs[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span>[] gcjToBd = calGCJ02toBD09(wgsToGcj[<span class="number">0</span>], wgsToGcj[<span class="number">1</span>]);</span><br><span class="line">        System.out.println(<span class="string">"GCJ02 -&gt; BD09  : "</span> + gcjToBd[<span class="number">1</span>] + <span class="string">","</span> + gcjToBd[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span>[] bdToGcj = calBD09toGCJ02(wgsToBd[<span class="number">0</span>], wgsToBd[<span class="number">1</span>]);</span><br><span class="line">        System.out.println(<span class="string">"BD09  -&gt; GCJ02 : "</span> + bdToGcj[<span class="number">1</span>] + <span class="string">","</span> + bdToGcj[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"OutOfChina     : "</span> + isOutOfChina(<span class="number">30.256676</span>, <span class="number">120.149987</span>, <span class="keyword">true</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="参考与感谢"><a href="#参考与感谢" class="headerlink" title="参考与感谢"></a>参考与感谢</h2><blockquote><p><a href="http://alienryderflex.com/polygon/" target="_blank" rel="noopener">Darel Rex Finley : Point-In-Polygon Algorithm</a><br><a href="http://www.cnblogs.com/Aimeast/archive/2012/08/09/2629614.html" target="_blank" rel="noopener">Aimeast : 【WP7】判断GPS坐标是否在中国</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;问题来源&quot;&gt;&lt;a href=&quot;#问题来源&quot; class=&quot;headerlink&quot; title=&quot;问题来源&quot;&gt;&lt;/a&gt;问题来源&lt;/h2&gt;&lt;p&gt;目前 IoT 领域各种智能设备都可以采集 GPS 数据，但是设备采集到的GPS都是 WGS-84 坐标系数据，在国内不能直接
      
    
    </summary>
    
      <category term="算法" scheme="http://leaveslm.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="地图" scheme="http://leaveslm.github.io/tags/%E5%9C%B0%E5%9B%BE/"/>
    
      <category term="gps" scheme="http://leaveslm.github.io/tags/gps/"/>
    
      <category term="java" scheme="http://leaveslm.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Windows 10 修改控制台字体</title>
    <link href="http://leaveslm.github.io/2017/05/07/2017-2017-05-07-Windows-10-%E4%BF%AE%E6%94%B9%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%AD%97%E4%BD%93/"/>
    <id>http://leaveslm.github.io/2017/05/07/2017-2017-05-07-Windows-10-修改控制台字体/</id>
    <published>2017-05-06T16:12:43.000Z</published>
    <updated>2018-07-25T09:51:29.748Z</updated>
    
    <content type="html"><![CDATA[<p>用过 Mac、Linux 的用户都会觉得这两个系统的 Terminal 字体相比 Windows 的看起来舒服很多，其实 Windows 控制台字体也是可以更改的，比如更改成等宽字体，下面的是更改方法，可以参考。控制台背景改成白色，字体改成黑色显示效果更佳。<br>推荐一款字体：Menlo<br>字体下载：<a href="/downloads/Menlo.zip">点击下载</a>  </p><h2 id="Win-R-regedit，打开注册表编辑器"><a href="#Win-R-regedit，打开注册表编辑器" class="headerlink" title="Win+R: regedit，打开注册表编辑器"></a>Win+R: regedit，打开注册表编辑器</h2><h2 id="添加字体"><a href="#添加字体" class="headerlink" title="添加字体"></a>添加字体</h2><p>[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Console\TrueTypeFont]<br>添加字符串值: “000” -&gt; Menlo (自选字体)  </p><h2 id="修改字符编码"><a href="#修改字符编码" class="headerlink" title="修改字符编码"></a>修改字符编码</h2><p>[HKEY_CURRENT_USER\Console\%SystemRoot%_system32_cmd.exe]<br>修改 “CodePage”=REG_DWORD: 0x0000fde9 (65001)<br>添加(可选) “FaceName”=REG_SZ: Menlo  </p><p>【注】十六进制”000003a8”或十进制”936”，表示“936 (ANSI/OEM - 简体中文 GBK)”</p><p>————————————– END ————————————–</p><h2 id="附-chcp详解"><a href="#附-chcp详解" class="headerlink" title="附: chcp详解"></a>附: chcp详解</h2><h3 id="功能说明"><a href="#功能说明" class="headerlink" title="功能说明"></a>功能说明</h3><p>显示活动控制台代码页数量，或更改该控制台的活动控制台代码页。如果在没有参数的情况下使用，则 chcp 显示活动控制台代码页的数量。</p><h3 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h3><p>只有随 XOX 一起安装的原始设备制造商 (OEM) 代码页才能在使用 Raster 字体的命令提示符窗口中正常显示。其他代码页则可在全屏幕模式下或者在使用 TrueType 字体的命令提示符窗口中正确显示。 就像在 MS-DOS 中一样，您不必准备代码页。 在指派了新代码页之后启动的程序将使用该新代码页，但如果程序（除了 Cmd.exe）是在指派新代码页之前启动的，那么该程序将使用原来的代码页。</p><p>语法<br>chcp [NNN] </p><p>参数<br>NNN 指定代码页。下表列出了MSDOS所有支持的代码页及其国家（地区）或者语言：<br>代码页        国家（地区）或语言<br>437          美国<br>850          多语言（拉丁文 I）<br>852          斯拉夫语（拉丁文 II）<br>855          西里尔文（俄语）<br>857          土耳其语<br>860          葡萄牙语<br>861          冰岛语<br>863          加拿大 - 法语<br>865          日耳曼语<br>866          俄语<br>869          现代希腊语<br>936          简体中文<br>950          繁体中文<br>65001        UTF-8  </p><p>/? 在命令提示符下显示帮助。</p><p>示例：  </p><p>要查看活动代码页设置，请键入：chcp  </p><p>出现类似于下面内容的消息：活动代码页：437  </p><p>如果要将活动代码页更改为 850（多语言），请键入：chcp 850  </p><p>如果指定的代码页无效，则会显示以下错误消息：无效代码页  </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;用过 Mac、Linux 的用户都会觉得这两个系统的 Terminal 字体相比 Windows 的看起来舒服很多，其实 Windows 控制台字体也是可以更改的，比如更改成等宽字体，下面的是更改方法，可以参考。控制台背景改成白色，字体改成黑色显示效果更佳。&lt;br&gt;推荐一款
      
    
    </summary>
    
      <category term="DIY" scheme="http://leaveslm.github.io/categories/DIY/"/>
    
    
      <category term="windows" scheme="http://leaveslm.github.io/tags/windows/"/>
    
  </entry>
  
</feed>

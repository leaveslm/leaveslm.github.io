<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Notes For Leaves</title>
  
  <subtitle>a Java developer&#39;s story</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://leaveslm.github.io/"/>
  <updated>2018-07-21T15:17:00.000Z</updated>
  <id>http://leaveslm.github.io/</id>
  
  <author>
    <name>Leaves</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Linux 安装 MySQL 5.7</title>
    <link href="http://leaveslm.github.io/2018/07/18/Linux_%E5%AE%89%E8%A3%85_%20MySQL_5.7%20/"/>
    <id>http://leaveslm.github.io/2018/07/18/Linux_安装_ MySQL_5.7 /</id>
    <published>2018-07-18T09:05:28.000Z</published>
    <updated>2018-07-21T15:17:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>MySQL 5.7.22 官方<a href="https://dev.mysql.com/downloads/mysql/5.7.html#downloads" target="_blank" rel="noopener">下载地址</a></p><h2 id="清理-MySQL、下载解压"><a href="#清理-MySQL、下载解压" class="headerlink" title="清理 MySQL、下载解压"></a>清理 MySQL、下载解压</h2><p>清理  </p><blockquote><p>find / -name mysql | xargs rm -rf  </p></blockquote><p>下载  </p><blockquote><p>wget <a href="https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.22-linux-glibc2.12-x86_64.tar.gz" target="_blank" rel="noopener">https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.22-linux-glibc2.12-x86_64.tar.gz</a></p></blockquote><p>解压  </p><blockquote><p>tar -zxvf mysql-5.7.22-linux-glibc2.12-x86_64.tar.gz</p></blockquote><p>重命名    </p><blockquote><p>mv mysql-5.7.22-linux-glibc2.12-x86_64 mysql </p></blockquote><hr><h2 id="创建-MySQL-组、用户"><a href="#创建-MySQL-组、用户" class="headerlink" title="创建 MySQL 组、用户"></a>创建 MySQL 组、用户</h2><p>查看有没有mysql组  </p><blockquote><p>cat /etc/group | grep mysql  </p></blockquote><p>查看有没有mysql用户</p><blockquote><p>cat /etc/passwd |grep mysql  </p></blockquote><p>没有则创建 </p><blockquote><p>groupadd mysql<br>useradd -r -g mysql mysql  </p></blockquote><p>更改 mysql 目录下所有的目录及文件夹所属组合用户</p><blockquote><p>chown -R mysql mysql<br>chgrp -R mysql mysql<br>cd mysql<br>ls -l<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">drwxr-xr-x.  2 mysql mysql  4096 7月  18 15:04 bin</span><br><span class="line">-rw-r--r--.  1 mysql mysql 17987 3月   4 21:40 COPYING</span><br><span class="line">drwxr-xr-x.  2 mysql mysql    52 7月  18 15:04 docs</span><br><span class="line">drwxr-xr-x.  3 mysql mysql  4096 7月  18 15:04 include</span><br><span class="line">drwxr-xr-x.  5 mysql mysql  4096 7月  18 15:04 lib</span><br><span class="line">drwxr-xr-x.  4 mysql mysql    28 7月  18 15:04 man</span><br><span class="line">-rw-r--r--.  1 mysql mysql  2478 3月   4 21:40 README</span><br><span class="line">drwxr-xr-x. 28 mysql mysql  4096 7月  18 15:04 share</span><br><span class="line">drwxr-xr-x.  2 mysql mysql    86 7月  18 15:08 support-files</span><br></pre></td></tr></table></figure></p></blockquote><hr><h2 id="修改-my-cnf-配置文件"><a href="#修改-my-cnf-配置文件" class="headerlink" title="修改 my.cnf 配置文件"></a>修改 my.cnf 配置文件</h2><p>从 5.7.18 开始不在二进制包中提供 my-default.cnf 文件</p><blockquote><p>vi /etc/my.cnf</p></blockquote><p>my-default.cnf<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># For advice on how to change settings please see</span><br><span class="line">#  </span><br><span class="line"># *** DO NOT EDIT THIS FILE. It‘s a template which will be copied to the</span><br><span class="line"># *** default location during install, and will be replaced if you</span><br><span class="line"># *** upgrade to a newer version of MySQL.</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"># Remove leading # and set to the amount of RAM for the most important data</span><br><span class="line"># cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.</span><br><span class="line"># innodb_buffer_pool_size = 128M</span><br><span class="line"></span><br><span class="line"># Remove leading # to turn on a very important data integrity option: logging</span><br><span class="line"># changes to the binary log between backups.</span><br><span class="line"># log_bin</span><br><span class="line"></span><br><span class="line"># These are commonly set, remove the # and set as required.</span><br><span class="line"># basedir = .....</span><br><span class="line"># datadir = .....</span><br><span class="line"># port = .....</span><br><span class="line"># server_id = .....</span><br><span class="line"># socket = .....</span><br><span class="line"></span><br><span class="line"># Remove leading # to set options mainly useful for reporting servers.</span><br><span class="line"># The server defaults are faster for transactions and fast SELECTs.</span><br><span class="line"># Adjust sizes as needed, experiment to find the optimal values.</span><br><span class="line"># join_buffer_size = 128M</span><br><span class="line"># sort_buffer_size = 2M</span><br><span class="line"># read_rnd_buffer_size = 2M </span><br><span class="line"></span><br><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br></pre></td></tr></table></figure></p><p>my.cnf<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"># For advice on how to change settings please see</span><br><span class="line">#  </span><br><span class="line"># *** DO NOT EDIT THIS FILE. It‘s a template which will be copied to the</span><br><span class="line"># *** default location during install, and will be replaced if you</span><br><span class="line"># *** upgrade to a newer version of MySQL.</span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">default-character-set = utf8</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set = utf8</span><br><span class="line">socket = /var/lib/mysql/mysql.sock</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">character-set-server = utf8</span><br><span class="line"></span><br><span class="line"># Remove leading # and set to the amount of RAM for the most important data</span><br><span class="line"># cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.</span><br><span class="line"># innodb_buffer_pool_size = 128M</span><br><span class="line"></span><br><span class="line"># Remove leading # to turn on a very important data integrity option: logging</span><br><span class="line"># changes to the binary log between backups.</span><br><span class="line"># log_bin</span><br><span class="line"></span><br><span class="line"># These are commonly set, remove the # and set as required.</span><br><span class="line">basedir = /usr/local/mysql/</span><br><span class="line">datadir = /usr/local/mysql/data/</span><br><span class="line">port = 3306</span><br><span class="line">#server_id = </span><br><span class="line">socket = /var/lib/mysql/mysql.sock</span><br><span class="line"></span><br><span class="line"># Remove leading # to set options mainly useful for reporting servers.</span><br><span class="line"># The server defaults are faster for transactions and fast SELECTs.</span><br><span class="line"># Adjust sizes as needed, experiment to find the optimal values.</span><br><span class="line"># join_buffer_size = 128M</span><br><span class="line"># sort_buffer_size = 2M</span><br><span class="line"># read_rnd_buffer_size = 2M</span><br><span class="line">max_connections = 1000</span><br><span class="line"></span><br><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br></pre></td></tr></table></figure></p><hr><h2 id="初始化-MySQL-数据库"><a href="#初始化-MySQL-数据库" class="headerlink" title="初始化 MySQL 数据库"></a>初始化 MySQL 数据库</h2><p>初始化</p><blockquote><p>cd /usr/local/mysql<br>./bin/mysqld –user=mysql –basedir=/usr/local/mysql –datadir=/usr/local/mysql/data –initialize   </p></blockquote><p>输出如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">2018-07-18T07:06:49.223422Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).</span><br><span class="line">2018-07-18T07:06:49.223579Z 0 [Warning] &apos;NO_ZERO_DATE&apos;, &apos;NO_ZERO_IN_DATE&apos; and &apos;ERROR_FOR_DIVISION_BY_ZERO&apos; sql modes should be used with strict mode. They will be merged with strict mode in a future release.</span><br><span class="line">2018-07-18T07:06:49.223591Z 0 [Warning] &apos;NO_AUTO_CREATE_USER&apos; sql mode was not set.</span><br><span class="line">2018-07-18T07:06:50.630648Z 0 [Warning] InnoDB: New log files created, LSN=45790</span><br><span class="line">2018-07-18T07:06:51.000475Z 0 [Warning] InnoDB: Creating foreign key constraint system tables.</span><br><span class="line">2018-07-18T07:06:51.028751Z 0 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: 24e198b5-8a59-11e8-9a33-aeceb5cf96b1.</span><br><span class="line">2018-07-18T07:06:51.031122Z 0 [Warning] Gtid table is not ready to be used. Table &apos;mysql.gtid_executed&apos; cannot be opened.</span><br><span class="line">2018-07-18T07:06:51.045661Z 1 [Note] A temporary password is generated for root@localhost: Ra%p1C(&gt;7J(p</span><br></pre></td></tr></table></figure></p><p>添加 RSA Key </p><blockquote><p>cd /usr/local/mysql<br>bin/mysql_ssl_rsa_setup  –datadir=/usr/local/mysql/data<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Generating a 2048 bit RSA private key</span><br><span class="line">..+++</span><br><span class="line">.......................................................+++</span><br><span class="line">writing new private key to &apos;ca-key.pem&apos;</span><br><span class="line">-----</span><br><span class="line">Generating a 2048 bit RSA private key</span><br><span class="line">....................................................................+++</span><br><span class="line">...........................................................+++</span><br><span class="line">writing new private key to &apos;server-key.pem&apos;</span><br><span class="line">-----</span><br><span class="line">Generating a 2048 bit RSA private key</span><br><span class="line">..............................................................................................................................................+++</span><br><span class="line">..................................+++</span><br><span class="line">writing new private key to &apos;client-key.pem&apos;</span><br><span class="line">-----</span><br></pre></td></tr></table></figure></p></blockquote><p>编辑 /usr/local/mysql/support-files/mysql.server 文件</p><blockquote><p>vi /usr/local/mysql/support-files/mysql.server<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">修改 basedir = /usr/local/mysql/</span><br><span class="line">修改 datadir = /usr/local/mysql/data/</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p></blockquote><hr><h2 id="启动-MySQL-服务"><a href="#启动-MySQL-服务" class="headerlink" title="启动 MySQL 服务"></a>启动 MySQL 服务</h2><blockquote><p>cd /usr/local/mysql<br>./support-files/mysql.server start  </p></blockquote><p>注意：如果遇到以下问题，执行以下操作<br>Starting MySQL.Logging to ‘/usr/local/mysql/data/localhost.localdomain.err’.<br>2018-07-18T07:08:26.909710Z mysqld_safe Directory ‘/var/lib/mysql’ for UNIX socket file don’t exists. </p><blockquote><p>mkdir /var/lib/mysql<br>chown mysql:mysql /var/lib/mysql<br>cd /usr/local/mysql<br>./support-files/mysql.server start  </p></blockquote><p>Starting MySQL… SUCCESS!  </p><blockquote><p>./support-files/mysql.server stop  </p></blockquote><p>Shutting down MySQL… SUCCESS!  </p><blockquote><p>./support-files/mysql.server restart  </p></blockquote><p>Shutting down MySQL… SUCCESS!<br>Starting MySQL… SUCCESS!  </p><hr><h2 id="修改-Root-密码，开启远程访问"><a href="#修改-Root-密码，开启远程访问" class="headerlink" title="修改 Root 密码，开启远程访问"></a>修改 Root 密码，开启远程访问</h2><blockquote><p>cd /usr/local/mysql<br>./bin/mysqld_safe –skip-grant-tables –skip-networking&amp;  </p></blockquote><p>登陆</p><blockquote><p>cd /usr/local/mysql/bin<br>./mysql -uroot -p  </p></blockquote><p>修改密码、授权远程登陆</p><blockquote><p>mysql&gt;<br>set password=password(“123456”);<br>use mysql;<br>update user set host=’%’ where user=’root’;<br>GRANT ALL PRIVILEGES ON <em>.</em> TO ‘myuser‘@’%’ IDENTIFIED BY ‘mypwd’ WITH GRANT OPTION;<br>FLUSH PRIVILEGES;<br>exit;  </p></blockquote><p>重启 MySQL 服务  </p><blockquote><p>service mysql restart;  </p></blockquote><p>查看编码  </p><blockquote><p>show variables like ‘character%’;</p></blockquote><hr><h2 id="配置-MySQL-服务开机自动启动"><a href="#配置-MySQL-服务开机自动启动" class="headerlink" title="配置 MySQL 服务开机自动启动"></a>配置 MySQL 服务开机自动启动</h2><p>拷贝启动文件到 /etc/init.d/ 下并重命令为 mysqld  </p><blockquote><p>cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld  </p></blockquote><p>增加执行权限  </p><blockquote><p>chmod 755 /etc/init.d/mysqld  </p></blockquote><p>检查自启动项列表中没有 mysqld 这个，如果没有就添加 mysqld  </p><blockquote><p>chkconfig –list mysqld<br>chkconfig –add mysqld  </p></blockquote><p>设置MySQL在345等级自动启动</p><blockquote><p>chkconfig –level 345 mysqld on  </p></blockquote><p>或用这个命令设置开机启动:  </p><blockquote><p>chkconfig mysqld on  </p></blockquote><hr><h2 id="MySQL-服务的启动-重启-停止"><a href="#MySQL-服务的启动-重启-停止" class="headerlink" title="MySQL 服务的启动/重启/停止"></a>MySQL 服务的启动/重启/停止</h2><p>启动 MySQL 服务  </p><blockquote><p>service mysqld start  </p></blockquote><p>停止 MySQL 服务  </p><blockquote><p>service mysqld stop</p></blockquote><p>重启 MySQL 服务  </p><blockquote><p>service mysqld restart  </p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;MySQL 5.7.22 官方&lt;a href=&quot;https://dev.mysql.com/downloads/mysql/5.7.html#downloads&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;下载地址&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;清理-
      
    
    </summary>
    
      <category term="基础服务" scheme="http://leaveslm.github.io/categories/%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1/"/>
    
    
      <category term="mysql" scheme="http://leaveslm.github.io/tags/mysql/"/>
    
      <category term="linux" scheme="http://leaveslm.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Windows 10 修改控制台字体</title>
    <link href="http://leaveslm.github.io/2018/05/07/Windows_10_%E4%BF%AE%E6%94%B9%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%AD%97%E4%BD%93/"/>
    <id>http://leaveslm.github.io/2018/05/07/Windows_10_修改控制台字体/</id>
    <published>2018-05-06T16:12:43.000Z</published>
    <updated>2018-07-23T01:09:42.862Z</updated>
    
    <content type="html"><![CDATA[<p>用过 Mac、Linux 的用户都会觉得这两个系统的 Terminal 字体相比 Windows 的看起来舒服很多，其实 Windows 控制台字体也是可以更改的，比如更改成等宽字体，下面的是更改方法，可以参考。控制台背景改成白色，字体改成黑色显示效果更佳。<br>推荐一款字体：Menlo<br>字体下载：<a href="/downloads/Menlo.zip">点击下载</a>  </p><h2 id="Win-R-regedit，打开注册表编辑器"><a href="#Win-R-regedit，打开注册表编辑器" class="headerlink" title="Win+R: regedit，打开注册表编辑器"></a>Win+R: regedit，打开注册表编辑器</h2><h2 id="添加字体"><a href="#添加字体" class="headerlink" title="添加字体"></a>添加字体</h2><p>[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Console\TrueTypeFont]<br>添加字符串值: “000” -&gt; Menlo (自选字体)  </p><h2 id="修改字符编码"><a href="#修改字符编码" class="headerlink" title="修改字符编码"></a>修改字符编码</h2><p>[HKEY_CURRENT_USER\Console\%SystemRoot%_system32_cmd.exe]<br>修改 “CodePage”=REG_DWORD: 0x0000fde9 (65001)<br>添加(可选) “FaceName”=REG_SZ: Menlo  </p><p>【注】十六进制”000003a8”或十进制”936”，表示“936 (ANSI/OEM - 简体中文 GBK)”</p><p>————————————– END ————————————–</p><h2 id="附-chcp详解"><a href="#附-chcp详解" class="headerlink" title="附: chcp详解"></a>附: chcp详解</h2><h3 id="功能说明"><a href="#功能说明" class="headerlink" title="功能说明"></a>功能说明</h3><p>显示活动控制台代码页数量，或更改该控制台的活动控制台代码页。如果在没有参数的情况下使用，则 chcp 显示活动控制台代码页的数量。</p><h3 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h3><p>只有随 XOX 一起安装的原始设备制造商 (OEM) 代码页才能在使用 Raster 字体的命令提示符窗口中正常显示。其他代码页则可在全屏幕模式下或者在使用 TrueType 字体的命令提示符窗口中正确显示。 就像在 MS-DOS 中一样，您不必准备代码页。 在指派了新代码页之后启动的程序将使用该新代码页，但如果程序（除了 Cmd.exe）是在指派新代码页之前启动的，那么该程序将使用原来的代码页。</p><p>语法<br>chcp [NNN] </p><p>参数<br>NNN 指定代码页。下表列出了MSDOS所有支持的代码页及其国家（地区）或者语言：<br>代码页        国家（地区）或语言<br>437          美国<br>850          多语言（拉丁文 I）<br>852          斯拉夫语（拉丁文 II）<br>855          西里尔文（俄语）<br>857          土耳其语<br>860          葡萄牙语<br>861          冰岛语<br>863          加拿大 - 法语<br>865          日耳曼语<br>866          俄语<br>869          现代希腊语<br>936          简体中文<br>950          繁体中文<br>65001        UTF-8  </p><p>/? 在命令提示符下显示帮助。</p><p>示例：  </p><p>要查看活动代码页设置，请键入：chcp  </p><p>出现类似于下面内容的消息：活动代码页：437  </p><p>如果要将活动代码页更改为 850（多语言），请键入：chcp 850  </p><p>如果指定的代码页无效，则会显示以下错误消息：无效代码页  </p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;用过 Mac、Linux 的用户都会觉得这两个系统的 Terminal 字体相比 Windows 的看起来舒服很多，其实 Windows 控制台字体也是可以更改的，比如更改成等宽字体，下面的是更改方法，可以参考。控制台背景改成白色，字体改成黑色显示效果更佳。&lt;br&gt;推荐一款
      
    
    </summary>
    
      <category term="DIY" scheme="http://leaveslm.github.io/categories/DIY/"/>
    
    
      <category term="windows" scheme="http://leaveslm.github.io/tags/windows/"/>
    
  </entry>
  
  <entry>
    <title>Windows 安装 MySQL 5.7</title>
    <link href="http://leaveslm.github.io/2018/04/24/Windows_%E5%AE%89%E8%A3%85_MySQL_5.7/"/>
    <id>http://leaveslm.github.io/2018/04/24/Windows_安装_MySQL_5.7/</id>
    <published>2018-04-24T05:01:04.000Z</published>
    <updated>2018-07-18T09:26:13.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQL-5-7-xx-ZIP版本配置方案"><a href="#MySQL-5-7-xx-ZIP版本配置方案" class="headerlink" title="MySQL 5.7.xx ZIP版本配置方案"></a>MySQL 5.7.xx ZIP版本配置方案</h2><p>MySQL 5.7.22 官方<a href="https://dev.mysql.com/downloads/mysql/5.7.html#downloads" target="_blank" rel="noopener">下载地址</a><br><a href="http://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html" target="_blank" rel="noopener">MySQL 官方配置参数查询</a></p><h2 id="一、下载-MySQL-5-7-xx-zip-安装包"><a href="#一、下载-MySQL-5-7-xx-zip-安装包" class="headerlink" title="一、下载 MySQL 5.7.xx zip 安装包"></a><strong>一、下载 MySQL 5.7.xx zip 安装包</strong></h2><p>本机以 Windows10 64 位系统为例<br>进入 Oracel 官网，选择 MySQL Windows (x86, 64-bit), ZIP Archive 下载包<br><a href="http://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">点此下载</a>  </p><hr><h2 id="二、解压安装包"><a href="#二、解压安装包" class="headerlink" title="二、解压安装包"></a><strong>二、解压安装包</strong></h2><p>将MySQL数据库解压至目录 <strong>D:\Program Files\MySQL\mysql-5.7.xx-winx64</strong><br>将 <strong>D:\Program Files\MySQL\mysql-5.7.xx-winx64\bin</strong> 添加至环境变量 <strong>Path</strong> 中</p><hr><h2 id="三、创建一个空文件夹，命名为“data”，用来存放数据"><a href="#三、创建一个空文件夹，命名为“data”，用来存放数据" class="headerlink" title="三、创建一个空文件夹，命名为“data”，用来存放数据"></a><strong>三、创建一个空文件夹，命名为“data”，用来存放数据</strong></h2><p>本机创建在 D:\Program Files\MySQL\mysql-5.7.xx-winx64 目录下，所以最后会看到<strong>D:\Program Files\MySQL\mysql-5.7.xx-winx64\data</strong>，此文件夹后面会有用到  </p><hr><h2 id="四、配置启动配置文件"><a href="#四、配置启动配置文件" class="headerlink" title="四、配置启动配置文件"></a><strong>四、配置启动配置文件</strong></h2><p>把 D:\Program Files\MySQL\mysql-5.7.xx-winx64\my-default.ini 文件复制一份，重新命名为 <strong>my.ini</strong>，修改里面的几个参数， 配置文件如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"># For advice on how to change settings please see</span><br><span class="line"># http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html</span><br><span class="line"># *** DO NOT EDIT THIS FILE. It&apos;s a template which will be copied to the</span><br><span class="line"># *** default location during install, and will be replaced if you</span><br><span class="line"># *** upgrade to a newer version of MySQL.</span><br><span class="line"></span><br><span class="line">[client]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">character-set-server=utf8</span><br><span class="line"></span><br><span class="line"># Remove leading # and set to the amount of RAM for the most important data</span><br><span class="line"># cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.</span><br><span class="line"># innodb_buffer_pool_size = 128M</span><br><span class="line"></span><br><span class="line"># Remove leading # to turn on a very important data integrity option: logging</span><br><span class="line"># changes to the binary log between backups.</span><br><span class="line"># log_bin</span><br><span class="line"></span><br><span class="line"># These are commonly set, remove the # and set as required.</span><br><span class="line"># server_id = .....</span><br><span class="line"># MySQL 安装目录</span><br><span class="line">basedir = D:\Program Files\MySQL\mysql-5.7.22-winx64</span><br><span class="line"># MySQL 数据库数据存放目录</span><br><span class="line">datadir = D:\Program Files\MySQL\mysql-5.7.22-winx64\data</span><br><span class="line"># MySQL 端口</span><br><span class="line">port = 3306</span><br><span class="line"># 允许最大连接数，默认200</span><br><span class="line">max_connections=200</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># Remove leading # to set options mainly useful for reporting servers.</span><br><span class="line"># The server defaults are faster for transactions and fast SELECTs.</span><br><span class="line"># Adjust sizes as needed, experiment to find the optimal values.</span><br><span class="line"># join_buffer_size = 128M</span><br><span class="line"># sort_buffer_size = 2M</span><br><span class="line"># read_rnd_buffer_size = 2M</span><br><span class="line"></span><br><span class="line">sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES</span><br><span class="line"></span><br><span class="line"># 创建新表时将使用的默认存储引擎</span><br><span class="line">default-storage-engine=INNODB</span><br><span class="line"></span><br><span class="line"># explicit_defaults_for_timestamp=true</span><br></pre></td></tr></table></figure><h2 id="五、初始化数据目录"><a href="#五、初始化数据目录" class="headerlink" title="五、初始化数据目录"></a><strong>五、初始化数据目录</strong></h2><ul><li><strong>管理员身份</strong>打开 CMD;  </li><li>当前路径定位到 <strong>D:\Program Files\MySQL\mysql-5.7.xx-winx64\bin</strong>  </li><li>按照mysql官方文档给出的步骤还有一步 Selecting a MySQL Server Type，就是选择用 mysqld 还是 mysqld-debug.</li></ul><p>一般使用如下命令：</p><blockquote><p>mysqld –defaults-file=”D:\Program Files\MySQL\mysql-5.7.xx-winx64\my.ini” –initialize-insecure</p></blockquote><p>注：  </p><ul><li>这个命令很重要，它会初始化 data 目录，在执行此命令前请先把 data 目录下的所有文件先删除，否则会失败；</li><li>可以选择用 –initialize-insecure 或者 –initialize 来初始化，–initialize-insecure 初始化 root 密码为空，如果用 –initialize 来初始化，会产生一个随机密码；</li><li>执行成功后你会在 data 目录 下看到 mysql，perofrmance_schema，sys 目录，同时还会有一些文件。</li></ul><hr><h2 id="六、安装-mysql-服务"><a href="#六、安装-mysql-服务" class="headerlink" title="六、安装 mysql 服务"></a><strong>六、安装 mysql 服务</strong></h2><blockquote><p>mysqld -install<br>mysqld -remove （出问题重新配置前需要卸载服务）</p></blockquote><hr><h2 id="七、启动-mysql-服务、添加初始密码"><a href="#七、启动-mysql-服务、添加初始密码" class="headerlink" title="七、启动 mysql 服务、添加初始密码"></a><strong>七、启动 mysql 服务、添加初始密码</strong></h2><blockquote><p>net start mysql<br>mysqladmin -u root password 123456<br>mysql -u root -p  </p></blockquote><hr><h2 id="八、设置默认编码"><a href="#八、设置默认编码" class="headerlink" title="八、设置默认编码"></a><strong>八、设置默认编码</strong></h2><p>先确保my.ini添加以下代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[client]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line">default-character-set=utf8</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line">default-character-set=utf8  或者  character-set-server=utf8</span><br></pre></td></tr></table></figure></p><p>通过命令查看数据库当前编码</p><blockquote><p>mysql -u root -p<br>show variables like ‘character%’;</p></blockquote><p>如果不是以下编码，则设置编码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">+--------------------------+------------------------------------------------------------+</span><br><span class="line">| Variable_name            | Value                                                      |</span><br><span class="line">+--------------------------+------------------------------------------------------------+</span><br><span class="line">| character_set_client     | utf8                                                       |</span><br><span class="line">| character_set_connection | utf8                                                       |</span><br><span class="line">| character_set_database   | utf8                                                       |</span><br><span class="line">| character_set_filesystem | binary                                                     |</span><br><span class="line">| character_set_results    | utf8                                                       |</span><br><span class="line">| character_set_server     | utf8                                                       |</span><br><span class="line">| character_set_system     | utf8                                                       |</span><br><span class="line">| character_sets_dir       | D:\Program Files\MySQL\mysql-5.7.22-winx64\share\charsets\ |</span><br><span class="line">+--------------------------+------------------------------------------------------------+</span><br><span class="line">8 rows in set, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure></p><p>设置编码：  </p><blockquote><p>SET character_set_client = utf8;<br>SET character_set_connection = utf8;<br>SET character_set_database = utf8;<br>SET character_set_results = utf8;<br>SET character_set_server = utf8;  </p></blockquote><ul><li>character_set_client为客户端编码方式；  </li><li>character_set_connection为建立连接使用的编码；  </li><li>character_set_database数据库的编码；  </li><li>character_set_results结果集的编码；  </li><li>character_set_server数据库服务器的编码；  </li></ul><hr><h2 id="九、mysql-开启远程连接"><a href="#九、mysql-开启远程连接" class="headerlink" title="九、mysql 开启远程连接"></a><strong>九、mysql 开启远程连接</strong></h2><blockquote><p>grant all privileges on *.* to ‘root‘@’%’ identified by ‘123456’ with grant option;</p></blockquote><p>后记：<br>如果中途有什么步骤失败，一定要执行 mysql 移除命令，然后删除 data 目录下的所有文件，然后删除服务 mysqld -remove<br>特别提醒：5.7 和 5.6 不太相同，要自己初始化数据 data 目录，不然启动不会成功</p><hr><h2 id="十、后记"><a href="#十、后记" class="headerlink" title="十、后记"></a><strong>十、后记</strong></h2><p>mysql 安装完后可能会用到的语句<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">alter user &apos;root&apos;@&apos;localhost&apos; identified by &apos;123&apos;;</span><br><span class="line">create database victor;</span><br><span class="line">create user &apos;victor&apos;@&apos;localhost&apos; identified by &apos;victor@123&apos;;</span><br><span class="line">flush privileges;</span><br><span class="line">creaet user &apos;victorremote&apos;@&apos;%&apos; identified by &apos;victorremote@123&apos;;</span><br><span class="line">flush privileges;</span><br><span class="line">grant all on victor.* to &apos;victor&apos;@&apos;localhost&apos; identified by &apos;victor@123&apos;;</span><br><span class="line">flush privileges;</span><br><span class="line">grant all on victor.* to &apos;victorremote&apos;@&apos;%&apos; identified by &apos;victorremote@123&apos;;</span><br><span class="line">flush privileges;</span><br><span class="line"></span><br><span class="line">################################</span><br><span class="line">#连接最大空闲时长</span><br><span class="line">SHOW GLOBAL VARIABLES LIKE &apos;wait_timeout&apos;;</span><br><span class="line">#最大连接数</span><br><span class="line">SHOW VARIABLES LIKE &apos;%max_connections%&apos;;</span><br><span class="line">SET GLOBAL max_connections = 200;</span><br><span class="line">#字符编码</span><br><span class="line">SHOW VARIABLES WHERE Variable_name LIKE &apos;character\_set\_%&apos; OR Variable_name LIKE &apos;collation%&apos;;</span><br><span class="line">SHOW GLOBAL STATUS LIKE &apos;innodb_buffer_pool_pages_%&apos;;</span><br><span class="line">SHOW PROCESSLIST;</span><br><span class="line">SHOW STATUS LIKE &apos;Table%&apos;;</span><br><span class="line">SHOW STATUS LIKE &apos;%lock%&apos;;</span><br><span class="line">################################</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;MySQL-5-7-xx-ZIP版本配置方案&quot;&gt;&lt;a href=&quot;#MySQL-5-7-xx-ZIP版本配置方案&quot; class=&quot;headerlink&quot; title=&quot;MySQL 5.7.xx ZIP版本配置方案&quot;&gt;&lt;/a&gt;MySQL 5.7.xx ZIP版本配置
      
    
    </summary>
    
      <category term="基础服务" scheme="http://leaveslm.github.io/categories/%E5%9F%BA%E7%A1%80%E6%9C%8D%E5%8A%A1/"/>
    
    
      <category term="mysql" scheme="http://leaveslm.github.io/tags/mysql/"/>
    
      <category term="windows" scheme="http://leaveslm.github.io/tags/windows/"/>
    
  </entry>
  
</feed>
